(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["front"],{"018a":function(t,e,r){"use strict";r("73d6")},1331:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=(0,a.regex)("integer",/(^[0-9]*$)|(^-[0-9]+$)/);e.default=i},"17b3":function(t,e,r){},"205c":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.scY>300,expression:"scY > 300"}],attrs:{small:"",elevation:"2",color:"#d7f3f5",fab:"",id:"pagetop"},on:{click:t.toTop}},[r("v-icon",{attrs:{small:""}},[t._v("mdi-triangle")])],1)},i=[],s={data:function(){return{scTimer:0,scY:0}},methods:{handleScroll:function(){var t=this;this.scTimer||(this.scTimer=setTimeout((function(){t.scY=window.scrollY,clearTimeout(t.scTimer),t.scTimer=0}),100))},toTop:function(){window.scrollTo({top:0,behavior:"smooth"})}},mounted:function(){window.addEventListener("scroll",this.handleScroll)}},n=s,o=(r("db84"),r("2877")),l=r("6544"),c=r.n(l),u=r("8336"),d=r("132d"),v=Object(o["a"])(n,a,i,!1,null,null,null);e["a"]=v.exports;c()(v,{VBtn:u["a"],VIcon:d["a"]})},"207d":function(t,e,r){},"29d5":function(t,e,r){},"2a12":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=function(t){return(0,a.withParams)({type:"maxLength",max:t},(function(e){return!(0,a.req)(e)||(0,a.len)(e)<=t}))};e.default=i},3360:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return(0,a.withParams)({type:"and"},(function(){for(var t=this,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e.length>0&&e.reduce((function(e,r){return e&&r.apply(t,a)}),!0)}))};e.default=i},"3a54":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=(0,a.regex)("alphaNum",/^[a-zA-Z0-9]*$/);e.default=i},4223:function(t,e,r){"use strict";r("c626")},"45b8":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=(0,a.regex)("numeric",/^[0-9]*$/);e.default=i},"46bc":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=function(t){return(0,a.withParams)({type:"maxValue",max:t},(function(e){return!(0,a.req)(e)||(!/\s/.test(e)||e instanceof Date)&&+e<=+t}))};e.default=i},5432:function(t,e,r){"use strict";r("ffc0")},"5d75":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i,s=(0,a.regex)("email",i);e.default=s},"5db3":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=function(t){return(0,a.withParams)({type:"minLength",min:t},(function(e){return!(0,a.req)(e)||(0,a.len)(e)>=t}))};e.default=i},6235:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=(0,a.regex)("alpha",/^[a-zA-Z]*$/);e.default=i},6417:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=function(t){return(0,a.withParams)({type:"not"},(function(e,r){return!(0,a.req)(e)||!t.call(this,e,r)}))};e.default=i},"64ef":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"my-container white--text mb-100 mt-100",attrs:{id:"singlePlaylist"}},[r("v-row",[r("v-col",{staticClass:"d-none d-sm-block",attrs:{cols:"12",sm:"3"}},[t.playlist.cover?r("v-img",{attrs:{width:"400",src:t.playlist.cover}}):t.songs.length>0?r("v-img",{attrs:{src:t.songs[0].song.cover}}):r("v-img",{attrs:{width:"400",src:"https://source.boringavatars.com/marble/1/?square"}})],1),r("v-col",{staticStyle:{position:"relative"},attrs:{cols:"12",sm:"9"}},[r("div",{staticClass:"d-flex"},[r("div",{staticClass:"d-sm-none me-4",staticStyle:{width:"30%"}},[t.playlist.cover?r("v-img",{attrs:{width:"200",src:t.playlist.cover}}):t.songs.length>0?r("v-img",{attrs:{width:"200",src:t.songs[0].song.cover}}):r("v-img",{attrs:{width:"200",src:"https://source.boringavatars.com/marble/1/?square"}})],1),r("div",[r("div",{staticClass:"text-h4 mb-2"},[t._v(t._s(t.playlist.title))]),t.playlist.songs?r("div",{staticClass:"grey--text"},[t._v(t._s(t.playlist.songs.length)+"首歌")]):t._e(),r("span",{staticClass:"grey--text"},[t._v("Published: "+t._s(t.playlist.createDate))]),r("div",{staticClass:"mt-4 fs-20"},[t._v(t._s(t.playlist.description))])])]),r("v-sheet",{staticClass:"mt-10 pa-4",attrs:{color:"secondary","min-height":"500",rounded:""}},[this.songs?r("ul",{staticClass:"white--text"},t._l(t.songs,(function(e,a){return r("li",{key:e._id,staticClass:"d-flex align-center pa-2",staticStyle:{height:"100px"}},[r("div",{staticClass:"text-h6 instantNum"},[t._v(t._s(a+1))]),r("router-link",{staticClass:"d-block",attrs:{to:"/track/"+e.song._id}},[r("v-img",{staticClass:"ms-2 d-none d-sm-flex",attrs:{width:"80px",src:e.song.cover}})],1),r("div",{staticClass:"d-block d-sm-none"},[r("v-hover",{scopedSlots:t._u([{key:"default",fn:function(i){var s=i.hover;return[r("v-img",{attrs:{width:"80",src:e.song.cover}},[r("v-fade-transition",[s?r("v-overlay",{attrs:{absolute:"",color:"#d7f3f5"}},[r("v-icon",{attrs:{"x-large":""},on:{click:function(e){return t.play(a)}}},[t._v("mdi-play-circle-outline")])],1):t._e()],1)],1)]}}],null,!0)})],1),r("div",{staticClass:"me-auto ms-6"},[r("div",{staticClass:"text-h6"},[t._v(t._s(e.song.title))]),r("div",{staticClass:"text-body-2"},[t._v(t._s(e.song.artist.userName))])]),r("div",{staticClass:"d-none d-sm-flex align-center"},[r("v-btn",{attrs:{icon:"",color:"white"},on:{click:function(e){return t.play(a)}}},[r("v-icon",{attrs:{medium:""}},[t._v("mdi-play-circle")])],1),r("v-btn",{attrs:{icon:"",color:"white"},on:{click:function(r){return t.likes(e.song._id)}}},[t.myLikes.includes(e.song._id)?r("v-icon",{attrs:{medium:""}},[t._v("mdi-cards-heart")]):r("v-icon",{attrs:{medium:""}},[t._v("mdi-cards-heart-outline")])],1),r("v-btn",{attrs:{icon:"",color:"white"}},[t.user._id===t.playlist.owner?r("v-icon",{attrs:{medium:""},on:{click:function(r){return t.deleteSong(e.song._id)}}},[t._v("mdi-trash-can")]):r("v-icon",{attrs:{medium:""},on:{click:function(r){return t.getSongId(e.song._id)}}},[t._v("mdi-plus")])],1)],1),r("div",{staticClass:"d-sm-none"},[r("v-btn",{attrs:{to:"/track/"+e.song._id,icon:"",small:"",color:"grey"}},[r("v-icon",{attrs:{small:""}},[t._v("mdi-music-box-multiple")])],1)],1)],1)})),0):t._e(),0===t.songs.length?r("div",{staticClass:"white--text text-center"},[t._v("此歌單尚無歌曲")]):t._e()]),r("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.dialogAdd,callback:function(e){t.dialogAdd=e},expression:"dialogAdd"}},[r("v-card",[r("v-card-title",[t._v("選擇想加入的歌單")]),r("v-divider"),r("v-card-text",{staticClass:"py-10"},[r("v-form",{ref:"form"},[r("v-select",{attrs:{items:t.items,label:"歌單名稱",outlined:"",rules:t.titleRule},model:{value:t.seletedPlaylist,callback:function(e){t.seletedPlaylist=e},expression:"seletedPlaylist"}})],1)],1),r("v-card-text",{staticClass:"d-flex justify-space-between"},[r("div",[r("div",{staticClass:"mb-2"},[t._v("沒有適合的歌單？")]),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.dialogAdd=!1,t.dialogCreate=!0}}},[t._v("建立歌單")])],1),r("div",{staticClass:"mt-7"},[r("v-btn",{on:{click:function(e){t.dialogAdd=!1}}},[t._v("取消")]),r("v-btn",{attrs:{color:"success ms-2"},on:{click:t.addToPlaylist}},[t._v("確定")])],1)])],1)],1),r("v-dialog",{attrs:{"max-width":"500"},model:{value:t.dialogCreate,callback:function(e){t.dialogCreate=e},expression:"dialogCreate"}},[r("v-card",[r("v-card-title",[t._v("建立歌單")]),r("v-divider"),r("v-card-text",[r("v-form",{ref:"form",staticClass:"px-10"},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-row",{staticClass:"text-body-1 align-center"},[r("v-col",{attrs:{cols:"3"}},[t._v("歌單名稱")]),r("v-col",{attrs:{cols:"9"}},[r("v-text-field",{attrs:{clearable:"",rules:t.titleRule},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),r("v-row",{staticClass:"text-body-1"},[r("v-col",{attrs:{cols:"3"}},[t._v("簡介")]),r("v-col",{attrs:{cols:"9"}},[r("v-textarea",{attrs:{outlined:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:t.resetForm}},[t._v("Cancel")]),r("v-btn",{attrs:{color:"primary",text:"",type:"submit"},on:{click:t.createPlaylist}},[t._v("Save")])],1)],1)],1)],1)],1)],1)},i=[],s=r("1da1"),n=(r("96cf"),r("fb6a"),r("c740"),r("a4d3"),r("e01a"),{data:function(){return{myLikes:[],playlist:{},songs:[],dialogAdd:!1,dialogCreate:!1,items:[],playlists:[],nowSongId:"",seletedPlaylist:"",form:{title:"",description:""},valid:!0,titleRule:[function(t){return!!t||"必填欄位"}],playingSong:{title:"",artist:"",file:"",cover:"",_id:""}}},methods:{play:function(t){this.playingSong={_id:this.songs[t].song._id,title:this.songs[t].song.title,artist:this.songs[t].song.artist.userName,file:this.songs[t].song.file,cover:this.songs[t].song.cover},this.$store.commit("track/play",this.playingSong)},getPlaylist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/playlists/"+t.$route.params.id,{headers:{authorization:"Bearer "+t.user.token}});case 3:r=e.sent,a=r.data,t.playlist=a.result,t.playlist.createDate=a.result.createDate.slice(0,10),t.songs=t.playlist.songs,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得歌單失敗"});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},deleteSong:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.$swal({icon:"warning",title:"刪除確認",text:"確定要從歌單移除此音樂",type:"warning",showCancelButton:!0,confirmButtonText:"移除",cancelButtonText:"取消"}).then((function(r){r.isConfirmed?e.api.patch("/playlists/deletesong/"+e.$route.params.id,{_id:t},{headers:{authorization:"Bearer "+e.user.token}}).then((function(){e.getPlaylist(),e.$swal({icon:"success",title:"成功",text:"刪除成功"})})).catch((function(t){e.$swal({icon:"error",title:"失敗",text:t.message})})):e.$swal.close()}));case 1:case"end":return r.stop()}}),r)})))()},likes:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,!e.user.isLogin){r.next=4;break}return r.next=4,e.api.patch("/users/likes/"+e.user._id,{_id:t},{headers:{authorization:"Bearer "+e.user.token}});case 4:return r.next=6,e.$store.dispatch("user/getUserInfo");case 6:r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),e.$swal({icon:"error",title:"錯誤",text:r.t0.response.data.message});case 11:e.getMyLikes();case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()},getMyLikes:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("user/getUserInfo");case 2:for(t.myLikes=[],r=0;r<t.user.likes.length;r++)t.myLikes.push(t.user.likes[r].tracks);return e.abrupt("return",[]);case 5:case"end":return e.stop()}}),e)})))()},getSongId:function(t){this.user.isLogin&&(this.dialogAdd=!0,this.nowSongId=t)},getUserPlaylist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0===t.user._id.length){e.next=13;break}return e.prev=1,e.next=4,t.api.get("/playlists?owner="+t.user._id);case 4:for(r=e.sent,a=r.data,t.playlists=a.result,i=0;i<t.playlists.length;i++)t.items.push(a.result[i].title);e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t.$swal({icon:"error",title:"錯誤",text:"取得歌單失敗"});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},addToPlaylist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.playlists.findIndex((function(e){return e.title===t.seletedPlaylist})),a=t.playlists[r]._id,e.prev=2,!t.user.isLogin){e.next=9;break}return e.next=6,t.api.patch("/playlists/addsong/"+a,{_id:t.nowSongId},{headers:{authorization:"Bearer "+t.user.token}});case 6:t.dialogAdd=!1,t.seletedPlaylist="",t.$swal({icon:"success",title:"成功",text:"加入成功"});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))()},createPlaylist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.post("/playlists",{title:t.form.title,description:t.form.description},{headers:{authorization:"Bearer "+t.user.token}});case 3:t.getUserPlaylist(),t.$swal({icon:"success",title:"成功",text:"新增成功"}),t.resetForm(),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},resetForm:function(){this.dialogCreate=!1,this.$refs.form.resetValidation(),this.form={title:"",description:""}}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getMyLikes(),t.getPlaylist(),t.getUserPlaylist();case 3:case"end":return e.stop()}}),e)})))()}}),o=n,l=r("2877"),c=r("6544"),u=r.n(c),d=r("8336"),v=r("b0af"),p=r("99d9"),f=r("62ad"),m=r("169a"),h=r("ce7e"),g=r("0789"),b=r("4bd4"),x=r("ce87"),y=r("132d"),w=r("adda"),k=r("a797"),_=r("0fd9"),C=r("b974"),$=r("8dd9"),P=r("2fa4"),S=r("8654"),V=r("a844"),O=Object(l["a"])(o,a,i,!1,null,null,null);e["default"]=O.exports;u()(O,{VBtn:d["a"],VCard:v["a"],VCardActions:p["a"],VCardText:p["c"],VCardTitle:p["d"],VCol:f["a"],VDialog:m["a"],VDivider:h["a"],VFadeTransition:g["d"],VForm:b["a"],VHover:x["a"],VIcon:y["a"],VImg:w["a"],VOverlay:k["a"],VRow:_["a"],VSelect:C["a"],VSheet:$["a"],VSpacer:P["a"],VTextField:S["a"],VTextarea:V["a"]})},"6ff5":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"my-container mt-100 mb-100",attrs:{id:"discover"}},[r("v-sheet",{staticClass:"secondary pa-4 chips-sheet",attrs:{rounded:""}},[r("div",{staticClass:"text-h5 mb-2 white--text"},[t._v("類別")]),r("v-chip-group",{attrs:{"active-class":"light-blue--text",column:"",dark:""}},[r("v-chip",{on:{click:function(e){return t.musicType("")}}},[t._v("All")]),r("v-chip",{on:{click:function(e){return t.musicType("Rock")}}},[t._v("Rock")]),r("v-chip",{on:{click:function(e){return t.musicType("Hip hop / Rap")}}},[t._v("Hip hop / Rap")]),r("v-chip",{on:{click:function(e){return t.musicType("Electronic")}}},[t._v("Electronic")]),r("v-chip",{on:{click:function(e){return t.musicType("Pop")}}},[t._v("Pop")]),r("v-chip",{on:{click:function(e){return t.musicType("Folk")}}},[t._v("Folk")]),r("v-chip",{on:{click:function(e){return t.musicType("Alternative")}}},[t._v("Alternative")]),r("v-chip",{on:{click:function(e){return t.musicType("Post rock")}}},[t._v("Post rock")]),r("v-chip",{on:{click:function(e){return t.musicType("Metal")}}},[t._v("Metal")]),r("v-chip",{on:{click:function(e){return t.musicType("Reggae / Funk")}}},[t._v("Reggae / Funk")]),r("v-chip",{on:{click:function(e){return t.musicType("R&B / Soul")}}},[t._v("R&B / Soul")]),r("v-chip",{on:{click:function(e){return t.musicType("Classic")}}},[t._v("Classic")]),r("v-chip",{on:{click:function(e){return t.musicType("Blues")}}},[t._v("Blues")]),r("v-chip",{on:{click:function(e){return t.musicType("Jazz")}}},[t._v("Jazz")]),r("v-chip",{on:{click:function(e){return t.musicType("Punk")}}},[t._v("Punk")])],1)],1),r("v-sheet",{staticClass:"pa-4 discover-list",attrs:{color:"secondary","min-height":"800",rounded:""}},[r("ul",{staticClass:"white--text"},t._l(t.sliceitems,(function(e,a){return r("li",{key:a,staticClass:"d-flex align-center pa-2 discover-list-item",staticStyle:{height:"80px"}},[r("div",{staticClass:"text-h6 instantNum"},[t._v(t._s(15*(t.page-1)+a+1))]),r("router-link",{staticClass:"xyCenter d-none d-sm-flex",attrs:{to:"/track/"+e._id}},[r("img",{staticClass:"ms-2 discover-cover",attrs:{src:e.cover}})]),r("div",{staticClass:"d-block d-sm-none"},[r("v-hover",{scopedSlots:t._u([{key:"default",fn:function(i){var s=i.hover;return[r("v-img",{attrs:{width:"70",src:e.cover}},[r("v-fade-transition",[s?r("v-overlay",{attrs:{absolute:"",color:"#d7f3f5"}},[r("v-icon",{attrs:{"x-large":""},on:{click:function(e){return t.play(a)}}},[t._v("mdi-play-circle-outline")])],1):t._e()],1)],1)]}}],null,!0)})],1),r("div",{staticClass:"me-auto ms-6"},[r("div",{staticClass:"text-h6"},[t._v(t._s(e.title))]),r("div",{staticClass:"text-body-2"},[t._v(t._s(e.artist.userName))])]),r("div",{staticClass:"d-sm-none"},[r("v-btn",{attrs:{to:"/track/"+e._id,icon:"",small:"",color:"grey"}},[r("v-icon",{attrs:{small:""}},[t._v("mdi-music-box-multiple")])],1)],1),r("div",{staticClass:"d-none d-sm-flex align-center"},[r("v-btn",{staticClass:"mx-1",attrs:{icon:"",color:"white"},on:{click:function(e){return t.play(a)}}},[r("v-icon",{attrs:{medium:""}},[t._v("mdi-play-circle")])],1),r("v-btn",{staticClass:"mx-1",attrs:{color:t.myLikes.includes(e._id)?"red":"white",rounded:"",outlined:""},on:{click:function(r){return t.likes(e._id)}}},[t.myLikes.includes(e._id)?r("v-icon",{attrs:{small:""}},[t._v("mdi-cards-heart")]):r("v-icon",{attrs:{small:""}},[t._v("mdi-cards-heart-outline")]),r("div",{staticClass:"ms-2"},[t._v(t._s(e.likes.length))])],1),r("v-btn",{staticClass:"mx-1",attrs:{icon:"",color:"white"},on:{click:function(r){return t.getSongId(e._id)}}},[r("v-icon",{attrs:{medium:""}},[t._v("mdi-plus")])],1)],1)],1)})),0),0===t.filterItems.length?r("div",{staticClass:"white--text text-center text-h6"},[t._v("目前沒有此類型音樂")]):t._e(),r("div",{staticClass:"text-center my-4 discover-page"},[r("v-pagination",{attrs:{length:Math.ceil(t.filterItems.length/15),circle:"",dark:"",color:"secondary"},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)]),r("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.dialogAdd,callback:function(e){t.dialogAdd=e},expression:"dialogAdd"}},[r("v-card",[r("v-card-title",[t._v("選擇想加入的歌單")]),r("v-divider"),r("v-card-text",{staticClass:"py-10"},[r("v-form",{ref:"form"},[r("v-select",{attrs:{items:t.items,label:"歌單名稱",outlined:"",rules:t.titleRule},model:{value:t.seletedPlaylist,callback:function(e){t.seletedPlaylist=e},expression:"seletedPlaylist"}})],1)],1),r("v-card-text",{staticClass:"d-flex justify-space-between"},[r("div",[r("div",{staticClass:"mb-2"},[t._v("沒有適合的歌單？")]),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.dialogAdd=!1,t.dialogCreate=!0}}},[t._v("建立歌單")])],1),r("div",{staticClass:"mt-7"},[r("v-btn",{on:{click:function(e){t.dialogAdd=!1}}},[t._v("取消")]),r("v-btn",{attrs:{color:"success ms-2"},on:{click:t.addToPlaylist}},[t._v("確定")])],1)])],1)],1),r("v-dialog",{attrs:{"max-width":"500"},model:{value:t.dialogCreate,callback:function(e){t.dialogCreate=e},expression:"dialogCreate"}},[r("v-card",[r("v-card-title",[t._v("建立歌單")]),r("v-divider"),r("v-card-text",[r("v-form",{ref:"form",staticClass:"px-10"},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-row",{staticClass:"text-body-1 align-center"},[r("v-col",{attrs:{cols:"3"}},[t._v("歌單名稱")]),r("v-col",{attrs:{cols:"9"}},[r("v-text-field",{attrs:{clearable:"",rules:t.titleRule},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),r("v-row",{staticClass:"text-body-1"},[r("v-col",{attrs:{cols:"3"}},[t._v("簡介")]),r("v-col",{attrs:{cols:"9"}},[r("v-textarea",{attrs:{outlined:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:t.resetForm}},[t._v("Cancel")]),r("v-btn",{attrs:{color:"primary",text:"",type:"submit"},on:{click:t.createPlaylist}},[t._v("Save")])],1)],1)],1),r("BackToTop")],1)},i=[],s=r("1da1"),n=(r("c740"),r("a4d3"),r("e01a"),r("4de4"),r("d3b7"),r("fb6a"),r("96cf"),r("205c")),o={components:{BackToTop:n["a"]},data:function(){return{myLikes:[],overlay:!1,page:1,publicTracks:[],filter:"",dialogAdd:!1,dialogCreate:!1,items:[],playlists:[],nowSongId:"",seletedPlaylist:"",form:{title:"",description:""},valid:!0,titleRule:[function(t){return!!t||"必填欄位"}],playingSong:{title:"",artist:"",file:"",cover:"",_id:""}}},methods:{play:function(t){this.playingSong={_id:this.filterItems[t]._id,title:this.filterItems[t].title,artist:this.filterItems[t].artist.userName,file:this.filterItems[t].file,cover:this.filterItems[t].cover},this.$store.commit("track/play",this.playingSong)},getAllPublic:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/tracks/public");case 3:r=e.sent,a=r.data,t.publicTracks=a.result.reverse(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得音樂失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},getSongId:function(t){this.user.isLogin&&(this.dialogAdd=!0,this.nowSongId=t)},getUserPlaylist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0===t.user._id.length){e.next=13;break}return e.prev=1,e.next=4,t.api.get("/playlists?owner="+t.user._id);case 4:for(r=e.sent,a=r.data,t.playlists=a.result,i=0;i<t.playlists.length;i++)t.items.push(a.result[i].title);e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t.$swal({icon:"error",title:"錯誤",text:"取得歌單失敗"});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},addToPlaylist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.playlists.findIndex((function(e){return e.title===t.seletedPlaylist})),a=t.playlists[r]._id,e.prev=2,!t.user.isLogin){e.next=9;break}return e.next=6,t.api.patch("/playlists/addsong/"+a,{_id:t.nowSongId},{headers:{authorization:"Bearer "+t.user.token}});case 6:t.dialogAdd=!1,t.seletedPlaylist="",t.$swal({icon:"success",title:"成功",text:"加入成功"});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))()},createPlaylist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.post("/playlists",{title:t.form.title,description:t.form.description},{headers:{authorization:"Bearer "+t.user.token}});case 3:t.getUserPlaylist(),t.$swal({icon:"success",title:"成功",text:"新增成功"}),t.resetForm(),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},resetForm:function(){this.dialogCreate=!1,this.$refs.form.resetValidation(),this.form={title:"",description:""}},likes:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,!e.user.isLogin){r.next=4;break}return r.next=4,e.api.patch("/users/likes/"+e.user._id,{_id:t},{headers:{authorization:"Bearer "+e.user.token}});case 4:return r.next=6,e.getAllPublic();case 6:r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),e.$swal({icon:"error",title:"錯誤",text:r.t0.response.data.message});case 11:e.getMyLikes();case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()},getMyLikes:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("user/getUserInfo");case 2:for(t.myLikes=[],r=0;r<t.user.likes.length;r++)t.myLikes.push(t.user.likes[r].tracks);return e.abrupt("return",[]);case 5:case"end":return e.stop()}}),e)})))()},top:function(){window.scrollTo({top:0})},musicType:function(t){this.filter=t,this.page=1,this.top()}},computed:{filterItems:function(){var t=this;return this.publicTracks.filter((function(e){return""===t.filter||e.type===t.filter}))},sliceitems:function(){return this.filterItems.slice(15*(this.page-1),15*(this.page-1)+15)}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getMyLikes(),t.getAllPublic(),t.getUserPlaylist();case 3:case"end":return e.stop()}}),e)})))()}},l=o,c=(r("018a"),r("2877")),u=r("6544"),d=r.n(u),v=r("8336"),p=r("b0af"),f=r("99d9"),m=r("cc20"),h=r("5530"),g=(r("8f5a"),r("7efd")),b=r("a9ad"),x=r("58df"),y=Object(x["a"])(g["a"],b["a"]).extend({name:"v-chip-group",provide:function(){return{chipGroup:this}},props:{column:Boolean},computed:{classes:function(){return Object(h["a"])(Object(h["a"])({},g["a"].options.computed.classes.call(this)),{},{"v-chip-group":!0,"v-chip-group--column":this.column})}},watch:{column:function(t){t&&(this.scrollOffset=0),this.$nextTick(this.onResize)}},methods:{genData:function(){return this.setTextColor(this.color,Object(h["a"])({},g["a"].options.methods.genData.call(this)))}}}),w=r("62ad"),k=r("169a"),_=r("ce7e"),C=r("0789"),$=r("4bd4"),P=r("ce87"),S=r("132d"),V=r("adda"),O=r("a797"),j=r("891e"),R=r("0fd9"),I=r("b974"),A=r("8dd9"),F=r("2fa4"),L=r("8654"),T=r("a844"),D=Object(c["a"])(l,a,i,!1,null,"3f66b7f5",null);e["default"]=D.exports;d()(D,{VBtn:v["a"],VCard:p["a"],VCardActions:f["a"],VCardText:f["c"],VCardTitle:f["d"],VChip:m["a"],VChipGroup:y,VCol:w["a"],VDialog:k["a"],VDivider:_["a"],VFadeTransition:C["d"],VForm:$["a"],VHover:P["a"],VIcon:S["a"],VImg:V["a"],VOverlay:O["a"],VPagination:j["a"],VRow:R["a"],VSelect:I["a"],VSheet:A["a"],VSpacer:F["a"],VTextField:L["a"],VTextarea:T["a"]})},7018:function(t,e,r){"use strict";r("207d")},"73d6":function(t,e,r){},"772d":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i,s=(0,a.regex)("url",i);e.default=s},"78ef":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.req=e.regex=e.ref=e.len=void 0,Object.defineProperty(e,"withParams",{enumerable:!0,get:function(){return a.default}});var a=i(r("8750"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}var n=function(t){if(Array.isArray(t))return!!t.length;if(void 0===t||null===t)return!1;if(!1===t)return!0;if(t instanceof Date)return!isNaN(t.getTime());if("object"===s(t)){for(var e in t)return!0;return!1}return!!String(t).length};e.req=n;var o=function(t){return Array.isArray(t)?t.length:"object"===s(t)?Object.keys(t).length:String(t).length};e.len=o;var l=function(t,e,r){return"function"===typeof t?t.call(e,r):r[t]};e.ref=l;var c=function(t,e){return(0,a.default)({type:t},(function(t){return!n(t)||e.test(t)}))};e.regex=c},"7ede":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"my-container mt-100 mb-100",attrs:{id:"event"}},[r("v-row",t._l(t.events,(function(e,a){return r("v-col",{key:a,attrs:{cols:"12",md:"6"}},[r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"800"}},[r("v-img",{attrs:{src:e.cover,height:"200px"}}),r("v-card-title",[t._v(t._s(e.title))]),r("v-card-subtitle",[t._v("演出者："+t._s(e.performer))]),r("div",{staticClass:"px-4"},[t._v("日期："+t._s(new Date(e.date).toLocaleDateString().replace(/\//g,"／")))]),r("div",{staticClass:"px-4"},[t._v("地點："+t._s(e.place))]),r("div",{staticClass:"px-4"},[t._v("票價："+t._s(e.price))]),r("v-card-actions",[r("v-btn",{attrs:{color:"teal lighten-2",text:""}},[t._v("官網購票")]),r("v-spacer"),r("v-btn",{attrs:{icon:""},on:{click:function(e){t.show=!t.show}}},[r("v-icon",[t._v(t._s(e.show?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1),r("v-expand-transition",{attrs:{"hide-on-leave":""}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[r("v-divider"),r("v-card-text",[t._v(t._s(e.content))])],1)])],1)],1)})),1)],1)},i=[],s=r("1da1"),n=(r("96cf"),{data:function(){return{events:[{}],show:!1}},methods:{getAllEvents:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/events/all");case 3:r=e.sent,a=r.data,t.events=a.result,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得活動資料失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getAllEvents();case 1:case"end":return e.stop()}}),e)})))()}}),o=n,l=r("2877"),c=r("6544"),u=r.n(c),d=r("8336"),v=r("b0af"),p=r("99d9"),f=r("62ad"),m=r("ce7e"),h=r("0789"),g=r("132d"),b=r("adda"),x=r("0fd9"),y=r("2fa4"),w=Object(l["a"])(o,a,i,!1,null,null,null);e["default"]=w.exports;u()(w,{VBtn:d["a"],VCard:v["a"],VCardActions:p["a"],VCardSubtitle:p["b"],VCardText:p["c"],VCardTitle:p["d"],VCol:f["a"],VDivider:m["a"],VExpandTransition:h["a"],VIcon:g["a"],VImg:b["a"],VRow:x["a"],VSpacer:y["a"]})},"825e":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"my-12 d-flex flex-column justify-center pb-16 my-container",staticStyle:{"background-color":"#1e1e1e",color:"white",position:"relative"},attrs:{id:"rank"}},[r("ul",{attrs:{id:"rank-list"}},[r("li",{staticClass:"py-4 fs-20"},[t._v("即時熱門")]),t._l(t.sliceitems,(function(e,a){return r("li",{key:a,staticClass:"d-flex align-center"},[r("div",{staticClass:"instantNum"},[t._v(t._s(15*(t.page-1)+a+1))]),r("router-link",{staticClass:"xyCenter d-none d-sm-flex",attrs:{to:"/track/"+e._id}},[r("img",{attrs:{src:e.cover}})]),r("div",{staticClass:"d-block d-sm-none"},[r("v-hover",{scopedSlots:t._u([{key:"default",fn:function(i){var s=i.hover;return[r("v-img",{attrs:{width:"80",src:e.cover}},[r("v-fade-transition",[s?r("v-overlay",{attrs:{absolute:"",color:"#d7f3f5"}},[r("v-icon",{attrs:{"x-large":""},on:{click:function(e){return t.play(a)}}},[t._v("mdi-play-circle-outline")])],1):t._e()],1)],1)]}}],null,!0)})],1),r("div",{staticClass:"me-auto"},[r("div",{staticClass:"ms-2"},[t._v(t._s(e.title))]),r("div",{staticClass:"ms-2 text-body-2"},[t._v(t._s(e.artist.userName))])]),r("div",{staticClass:"d-none d-sm-flex xyCenter",staticStyle:{width:"130px"}},[r("v-btn",{staticClass:"mx-1",attrs:{icon:"",color:"white"},on:{click:function(e){return t.play(a)}}},[r("v-icon",{attrs:{medium:""}},[t._v("mdi-play-circle")])],1),r("v-btn",{staticClass:"mx-1",attrs:{outlined:"",rounded:"",color:t.myLikes.includes(e._id)?"red":"white"},on:{click:function(r){return t.likes(e._id)}}},[t.myLikes.includes(e._id)?r("v-icon",{attrs:{small:""}},[t._v("mdi-cards-heart")]):r("v-icon",{attrs:{small:""}},[t._v("mdi-cards-heart-outline")]),r("div",{staticClass:"ms-2"},[t._v(t._s(e.likes.length))])],1),r("v-btn",{staticClass:"mx-1",attrs:{icon:"",color:"white"}},[r("v-icon",{attrs:{medium:""},on:{click:function(r){return t.getSongId(e._id)}}},[t._v("mdi-plus")])],1)],1),r("div",{staticClass:"d-sm-none"},[r("v-btn",{attrs:{to:"/track/"+e._id,icon:"",small:"",color:"grey"}},[r("v-icon",{attrs:{small:""}},[t._v("mdi-music-box-multiple")])],1)],1)],1)}))],2),r("div",{staticClass:"text-center my-4"},[r("v-pagination",{attrs:{length:Math.ceil(t.sortItems.length/15),circle:"",dark:"",color:"secondary"},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),r("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.dialogAdd,callback:function(e){t.dialogAdd=e},expression:"dialogAdd"}},[r("v-card",[r("v-card-title",[t._v("選擇想加入的歌單")]),r("v-divider"),r("v-card-text",{staticClass:"py-10"},[r("v-form",{ref:"form"},[r("v-select",{attrs:{items:t.items,label:"歌單名稱",outlined:"",rules:t.titleRule},model:{value:t.seletedPlaylist,callback:function(e){t.seletedPlaylist=e},expression:"seletedPlaylist"}})],1)],1),r("v-card-text",{staticClass:"d-flex justify-space-between"},[r("div",[r("div",{staticClass:"mb-2"},[t._v("沒有適合的歌單？")]),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.dialogAdd=!1,t.dialogCreate=!0}}},[t._v("建立歌單")])],1),r("div",{staticClass:"mt-7"},[r("v-btn",{on:{click:function(e){t.dialogAdd=!1}}},[t._v("取消")]),r("v-btn",{attrs:{color:"success ms-2"},on:{click:t.addToPlaylist}},[t._v("確定")])],1)])],1)],1),r("v-dialog",{attrs:{"max-width":"500"},model:{value:t.dialogCreate,callback:function(e){t.dialogCreate=e},expression:"dialogCreate"}},[r("v-card",[r("v-card-title",[t._v("建立歌單")]),r("v-divider"),r("v-card-text",[r("v-form",{ref:"form",staticClass:"px-10"},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-row",{staticClass:"text-body-1 align-center"},[r("v-col",{attrs:{cols:"3"}},[t._v("歌單名稱")]),r("v-col",{attrs:{cols:"9"}},[r("v-text-field",{attrs:{clearable:"",rules:t.titleRule},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),r("v-row",{staticClass:"text-body-1"},[r("v-col",{attrs:{cols:"3"}},[t._v("簡介")]),r("v-col",{attrs:{cols:"9"}},[r("v-textarea",{attrs:{outlined:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:t.resetForm}},[t._v("Cancel")]),r("v-btn",{attrs:{color:"primary",text:"",type:"submit"},on:{click:t.createPlaylist}},[t._v("Save")])],1)],1)],1),r("BackToTop")],1)},i=[],s=r("1da1"),n=(r("c740"),r("a4d3"),r("e01a"),r("e9c4"),r("4e827"),r("fb6a"),r("96cf"),r("205c")),o={components:{BackToTop:n["a"]},data:function(){return{myLikes:[],page:1,publicTracks:[],dialogAdd:!1,dialogCreate:!1,items:[],playlists:[],nowSongId:"",seletedPlaylist:"",form:{title:"",description:""},valid:!0,titleRule:[function(t){return!!t||"必填欄位"}],playingSong:{title:"",artist:"",file:"",cover:"",_id:""}}},methods:{play:function(t){this.playingSong={_id:this.sortItems[t]._id,title:this.sortItems[t].title,artist:this.sortItems[t].artist.userName,file:this.sortItems[t].file,cover:this.sortItems[t].cover},this.$store.commit("track/play",this.playingSong)},getSongId:function(t){this.user.isLogin&&(this.dialogAdd=!0,this.nowSongId=t)},getUserPlaylist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0===t.user._id.length){e.next=13;break}return e.prev=1,e.next=4,t.api.get("/playlists?owner="+t.user._id);case 4:for(r=e.sent,a=r.data,t.playlists=a.result,i=0;i<t.playlists.length;i++)t.items.push(a.result[i].title);e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t.$swal({icon:"error",title:"錯誤",text:"取得歌單失敗"});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},addToPlaylist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.playlists.findIndex((function(e){return e.title===t.seletedPlaylist})),a=t.playlists[r]._id,e.prev=2,!t.user.isLogin){e.next=9;break}return e.next=6,t.api.patch("/playlists/addsong/"+a,{_id:t.nowSongId},{headers:{authorization:"Bearer "+t.user.token}});case 6:t.dialogAdd=!1,t.seletedPlaylist="",t.$swal({icon:"success",title:"成功",text:"加入成功"});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))()},createPlaylist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.post("/playlists",{title:t.form.title,description:t.form.description},{headers:{authorization:"Bearer "+t.user.token}});case 3:t.getUserPlaylist(),t.$swal({icon:"success",title:"成功",text:"新增成功"}),t.resetForm(),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},resetForm:function(){this.dialogCreate=!1,this.$refs.form.resetValidation(),this.form={title:"",description:""}},getAllPublic:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/tracks/public");case 3:r=e.sent,a=r.data,t.publicTracks=a.result,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得音樂失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},likes:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,!e.user.isLogin){r.next=4;break}return r.next=4,e.api.patch("/users/likes/"+e.user._id,{_id:t},{headers:{authorization:"Bearer "+e.user.token}});case 4:return r.next=6,e.getAllPublic();case 6:r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),e.$swal({icon:"error",title:"錯誤",text:r.t0.response.data.message});case 11:e.getMyLikes();case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()},getMyLikes:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("user/getUserInfo");case 2:for(t.myLikes=[],r=0;r<t.user.likes.length;r++)t.myLikes.push(t.user.likes[r].tracks);return e.abrupt("return",[]);case 5:case"end":return e.stop()}}),e)})))()}},computed:{sortItems:function(){var t=JSON.parse(JSON.stringify(this.publicTracks));return t.sort((function(t,e){return e.likes.length-t.likes.length}))},sliceitems:function(){return this.sortItems.slice(15*(this.page-1),15*(this.page-1)+15)}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getMyLikes(),t.getUserPlaylist(),t.getAllPublic();case 3:case"end":return e.stop()}}),e)})))()}},l=o,c=r("2877"),u=r("6544"),d=r.n(u),v=r("8336"),p=r("b0af"),f=r("99d9"),m=r("62ad"),h=r("169a"),g=r("ce7e"),b=r("0789"),x=r("4bd4"),y=r("ce87"),w=r("132d"),k=r("adda"),_=r("a797"),C=r("891e"),$=r("0fd9"),P=r("b974"),S=r("2fa4"),V=r("8654"),O=r("a844"),j=Object(c["a"])(l,a,i,!1,null,null,null);e["default"]=j.exports;d()(j,{VBtn:v["a"],VCard:p["a"],VCardActions:f["a"],VCardText:f["c"],VCardTitle:f["d"],VCol:m["a"],VDialog:h["a"],VDivider:g["a"],VFadeTransition:b["d"],VForm:x["a"],VHover:y["a"],VIcon:w["a"],VImg:k["a"],VOverlay:_["a"],VPagination:C["a"],VRow:$["a"],VSelect:P["a"],VSpacer:S["a"],VTextField:V["a"],VTextarea:O["a"]})},8750:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a="web"===Object({VUE_APP_API:"https://glacier-music.herokuapp.com/",NODE_ENV:"production",BASE_URL:""}).BUILD?r("cb69").withParams:r("0234").withParams,i=a;e.default=i},"891e":function(t,e,r){"use strict";var a=r("2909"),i=r("5530"),s=(r("a9e3"),r("99af"),r("d3b7"),r("25f0"),r("d81d"),r("17b3"),r("9d26")),n=r("dc22"),o=r("a9ad"),l=r("de2c"),c=r("7560"),u=r("58df");e["a"]=Object(u["a"])(o["a"],Object(l["a"])({onVisible:["init"]}),c["a"]).extend({name:"v-pagination",directives:{Resize:n["a"]},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:function(t){return t%1===0}},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data:function(){return{maxButtons:0,selected:null}},computed:{classes:function(){return Object(i["a"])({"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled},this.themeClasses)},items:function(){var t=parseInt(this.totalVisible,10);if(0===t)return[];var e=Math.min(Math.max(0,t)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=e)return this.range(1,this.length);var r=e%2===0?1:0,i=Math.floor(e/2),s=this.length-i+1+r;if(this.value>i&&this.value<s){var n=1,o=this.length,l=this.value-i+2,c=this.value+i-2-r,u=l-1===n+1?2:"...",d=c+1===o-1?c+1:"...";return[1,u].concat(Object(a["a"])(this.range(l,c)),[d,this.length])}if(this.value===i){var v=this.value+i-1-r;return[].concat(Object(a["a"])(this.range(1,v)),["...",this.length])}if(this.value===s){var p=this.value-i+1;return[1,"..."].concat(Object(a["a"])(this.range(p,this.length)))}return[].concat(Object(a["a"])(this.range(1,i)),["..."],Object(a["a"])(this.range(s,this.length)))}},watch:{value:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.selected=null,this.$nextTick(this.onResize),setTimeout((function(){return t.selected=t.value}),100)},onResize:function(){var t=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((t-96)/42)},next:function(t){t.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous:function(t){t.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range:function(t,e){var r=[];t=t>0?t:1;for(var a=t;a<=e;a++)r.push(a);return r},genIcon:function(t,e,r,a,i){return t("li",[t("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":r},attrs:{disabled:r,type:"button","aria-label":i},on:r?{}:{click:a}},[t(s["a"],[e])])])},genItem:function(t,e){var r=this,a=e===this.value&&(this.color||"primary"),i=e===this.value,s=i?this.currentPageAriaLabel:this.pageAriaLabel;return t("button",this.setBackgroundColor(a,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":e===this.value},attrs:{type:"button","aria-current":i,"aria-label":this.$vuetify.lang.t(s,e)},on:{click:function(){return r.$emit("input",e)}}}),[e.toString()])},genItems:function(t){var e=this;return this.items.map((function(r,a){return t("li",{key:a},[isNaN(Number(r))?t("span",{class:"v-pagination__more"},[r.toString()]):e.genItem(t,r)])}))},genList:function(t,e){return t("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},e)}},render:function(t){var e=[this.genIcon(t,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(t),this.genIcon(t,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return t("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(t,e)])}})},"8cab":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"playlists"}},[r("div",{staticClass:"d-flex flex-column justify-center",attrs:{id:"festival-playlist"}},[r("div",{staticClass:"text-center text-h4"},[t._v("特別企劃")]),r("div",{staticClass:"example-3d"},[r("swiper",{staticClass:"swiper",staticStyle:{width:"80%"},attrs:{options:t.swiperOption}},[t._l(t.festivalPlaylists,(function(t,e){return r("swiper-slide",{key:e},[r("router-link",{attrs:{to:"/playlist/"+t._id}},[r("v-img",{staticStyle:{"border-radius":"4px 4px 0 0"},attrs:{src:t.cover}})],1)],1)})),r("div",{staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"}),r("div",{staticClass:"swiper-button-prev",attrs:{slot:"button-prev"},slot:"button-prev"})],2)],1)]),r("div",{staticClass:"d-flex flex-column justify-center",attrs:{id:"vibe-playlist"}},[r("div",{staticClass:"white--text text-center text-h4"},[t._v("情境歌單")]),r("div",{staticClass:"example-3d"},[r("swiper",{staticClass:"swiper",staticStyle:{width:"80%"},attrs:{options:t.swiperOption}},[t._l(t.vibePlaylists,(function(t,e){return r("swiper-slide",{key:e},[r("router-link",{attrs:{to:"/playlist/"+t._id}},[r("v-img",{staticStyle:{"border-radius":"4px 4px 0 0"},attrs:{src:t.cover}})],1)],1)})),r("div",{staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"}),r("div",{staticClass:"swiper-button-prev",attrs:{slot:"button-prev"},slot:"button-prev"})],2)],1)])])},i=[],s=r("1da1"),n=(r("96cf"),r("ac1f"),r("5319"),r("4de4"),r("d3b7"),r("7212")),o=(r("a7a3"),{name:"swiper-example-free-mode",title:"Free mode / No fixed positions",components:{Swiper:n["Swiper"],SwiperSlide:n["SwiperSlide"]},data:function(){return{admin:"61f80ddc3e24fd41116fc86d",events:[],playlists:[],festivalPlaylists:[],vibePlaylists:[],overlay:!1,swiperOption:{effect:"coverflow",grabCursor:!0,centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},autoplay:{delay:3e3,disableOnInteraction:!1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}}},methods:{getAdminPlaylists:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/playlists?owner="+t.admin);case 3:for(r=e.sent,a=r.data,t.playlists=a.result,i=0;i<t.playlists.length;i++)t.playlists[i].createDate=new Date(t.playlists[i].createDate).toLocaleDateString().replace(/\//g,".");t.festivalPlaylists=t.playlists.filter((function(t){return"festival"===t.type})),t.vibePlaylists=t.playlists.filter((function(t){return"vibe"===t.type})),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得歌單失敗"});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getAdminPlaylists();case 1:case"end":return e.stop()}}),e)})))()}}),l=o,c=(r("7018"),r("2877")),u=r("6544"),d=r.n(u),v=r("adda"),p=Object(c["a"])(l,a,i,!1,null,"6a1854ac",null);e["default"]=p.exports;d()(p,{VImg:v["a"]})},"8cd0":function(t,e,r){},"8f5a":function(t,e,r){},9078:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"my-container white--text",attrs:{id:"singleTrack"}},[r("v-row",[r("v-col",{staticClass:"py-4",attrs:{cols:"12",sm:"6",md:"4"}},[r("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.hover;return[r("v-img",{attrs:{width:"100%",src:t.track.cover}},[r("v-fade-transition",[a?r("v-overlay",{attrs:{absolute:"",color:"#d7f3f5"}},[r("v-icon",{attrs:{"x-large":""},on:{click:function(e){return t.play(t.track._id)}}},[t._v("mdi-play-circle-outline")])],1):t._e()],1)],1)]}}])}),r("div",{staticClass:"d-flex align-center mt-6"},[r("v-avatar",{attrs:{size:"50"}},[null!==t.track.artist.avatar?r("img",{attrs:{src:t.track.artist.avatar}}):r("img",{attrs:{src:t.randomAvatar}})]),r("router-link",{staticClass:"ms-4 me-auto",attrs:{to:"/back/user/"+t.track.artist._id}},[0!==t.track.artist.userName.length?r("div",{staticClass:"white--text text-h6"},[t._v(t._s(t.track.artist.userName))]):r("div",{staticClass:"white--text text-h6"},[t._v(t._s(t.track.artist.account))])]),t.user.id===t.track.artist._id||t.followState?t._e():r("v-btn",{staticClass:"theme-btn",on:{click:t.follow}},[t._v("+ 追蹤")]),t.user.id!==t.track.artist._id&&t.followState?r("v-btn",{attrs:{outlined:"",color:"#d7f3f5"},on:{click:t.follow}},[t._v("追蹤中")]):t._e()],1)],1),r("v-col",{staticStyle:{position:"relative"},attrs:{cols:"12",sm:"6",md:"8"}},[r("div",{staticClass:"text-h4 mb-5"},[t._v(t._s(t.track.title))]),r("v-divider",{attrs:{color:"grey"}}),r("v-chip",{staticClass:"mt-4",attrs:{"x-small":""}},[t._v(t._s(t.track.type))]),r("div",{staticClass:"grey--text mt-4"},[t._v("Published:"+t._s(t.track.uploadDate))]),r("div",{staticClass:"mt-4 text-h6"},[t._v("喜歡")]),r("span",{staticClass:"primary-text text-h4"},[t._v(t._s(t.track.likes.length))]),r("v-speed-dial",{attrs:{top:t.top,bottom:t.bottom,right:t.right,left:t.left,direction:t.direction,"open-on-hover":t.hover,transition:t.transition,absolute:""},scopedSlots:t._u([{key:"activator",fn:function(){return[r("v-btn",{attrs:{small:"",color:"#d7f3f5",fab:""},model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[t.fab?r("v-icon",[t._v("mdi-close")]):r("v-icon",[t._v("mdi-dots-horizontal")])],1)]},proxy:!0}]),model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[r("v-btn",{attrs:{fab:"",dark:"","x-small":"",color:"amber"},on:{click:function(e){return t.play(t.track._id)}}},[r("v-icon",[t._v("mdi-play")])],1),r("v-btn",{attrs:{fab:"",dark:"","x-small":"",color:"cyan"}},[r("v-icon",{on:{click:function(e){return t.getSongId(t.$route.params.id)}}},[t._v("mdi-plus")])],1),r("v-btn",{attrs:{fab:"",dark:"","x-small":"",color:"secondary"},on:{click:t.likes}},[r("v-icon",[t._v(t._s(t.likeIcon))])],1)],1)],1)],1),r("v-row",{staticClass:"mt-10"},[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-card",[r("v-tabs",{attrs:{"fixed-tabs":"",dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[r("v-tab",{attrs:{href:"#intro"}},[t._v("介紹")]),r("v-tab",{attrs:{href:"#lyric"}},[t._v("歌詞")])],1),r("v-tabs-items",{staticClass:"white--text pa-10 singleTrack-intro",attrs:{dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[r("v-tab-item",{attrs:{value:"intro"}},[r("v-card-text",{staticClass:"text-body-1 text-wrapper"},[t._v(t._s(t.track.description))])],1),r("v-tab-item",{attrs:{value:"lyric"}},[r("v-card-text",{staticClass:"text-body-1 text-wrapper"},[t._v(t._s(t.track.lyric))])],1)],1)],1)],1),r("v-col",{attrs:{cols:"12",md:"8"}},[r("v-sheet",{staticClass:"white--text pa-6 singleTrack-messages",attrs:{dark:"","min-height":"548px",rounded:""}},[r("div",{staticClass:"text-h6"},[t._v("留言")]),r("v-sheet",{staticClass:"mt-5 py-4 px-3",staticStyle:{position:"relative"},attrs:{color:"secondary",height:"240px",rounded:""}},[r("div",{staticClass:"d-flex"},[r("v-avatar",{attrs:{size:"50"}},[t.user.avatar?r("img",{attrs:{src:t.user.avatar}}):r("img",{attrs:{src:"https://source.boringavatars.com/beam/"+t.user.account}})]),r("v-textarea",{staticClass:"ms-4",attrs:{outlined:"","no-resize":"",label:"我想要說..."},model:{value:t.newComment,callback:function(e){t.newComment=e},expression:"newComment"}})],1),r("v-btn",{staticClass:"theme-btn",attrs:{absolute:"",right:"",bottom:""},on:{click:t.comment}},[t._v("留言")])],1),t._l(t.track.comments,(function(e,a){return r("v-sheet",{key:a,staticClass:"mt-5 py-2 px-3",attrs:{color:"secondary",height:"140px",rounded:""}},[e.users?r("div",{staticClass:"d-flex justify-space-between"},[r("div",{staticClass:"publisher d-flex"},[r("v-avatar",{staticClass:"mb-3",attrs:{size:"40"}},[e.users.avatar?r("img",{attrs:{src:e.users.avatar}}):r("img",{attrs:{src:"https://source.boringavatars.com/beam/"+t.user.account}})]),r("div",{staticClass:"ms-2 text-h6"},[t._v(t._s(e.users.userName))])],1),r("div",{staticClass:"grey--text"},[t._v(t._s(e.date.slice(0,10)))])]):t._e(),r("div",{staticClass:"ms-14"},[t._v(t._s(e.message))])])}))],2)],1),r("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.dialogAdd,callback:function(e){t.dialogAdd=e},expression:"dialogAdd"}},[r("v-card",[r("v-card-title",[t._v("選擇想加入的歌單")]),r("v-divider"),r("v-card-text",{staticClass:"py-10"},[r("v-form",{ref:"form"},[r("v-select",{attrs:{items:t.items,label:"歌單名稱",outlined:"",rules:t.titleRule},model:{value:t.seletedPlaylist,callback:function(e){t.seletedPlaylist=e},expression:"seletedPlaylist"}})],1)],1),r("v-card-text",{staticClass:"d-flex justify-space-between"},[r("div",[r("div",{staticClass:"mb-2"},[t._v("沒有適合的歌單？")]),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.dialogAdd=!1,t.dialogCreate=!0}}},[t._v("建立歌單")])],1),r("div",{staticClass:"mt-7"},[r("v-btn",{on:{click:function(e){t.dialogAdd=!1}}},[t._v("取消")]),r("v-btn",{attrs:{color:"success ms-2"},on:{click:t.addToPlaylist}},[t._v("確定")])],1)])],1)],1),r("v-dialog",{attrs:{"max-width":"500"},model:{value:t.dialogCreate,callback:function(e){t.dialogCreate=e},expression:"dialogCreate"}},[r("v-card",[r("v-card-title",[t._v("建立歌單")]),r("v-divider"),r("v-card-text",[r("v-form",{ref:"form",staticClass:"px-10"},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-row",{staticClass:"text-body-1 align-center"},[r("v-col",{attrs:{cols:"3"}},[t._v("歌單名稱")]),r("v-col",{attrs:{cols:"9"}},[r("v-text-field",{attrs:{clearable:"",rules:t.titleRule},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),r("v-row",{staticClass:"text-body-1"},[r("v-col",{attrs:{cols:"3"}},[t._v("簡介")]),r("v-col",{attrs:{cols:"9"}},[r("v-textarea",{attrs:{outlined:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:t.resetForm}},[t._v("Cancel")]),r("v-btn",{attrs:{color:"primary",text:"",type:"submit"},on:{click:t.createPlaylist}},[t._v("Save")])],1)],1)],1)],1)],1)},i=[],s=r("1da1"),n=(r("96cf"),r("fb6a"),r("d3b7"),r("498a"),r("c740"),r("a4d3"),r("e01a"),{data:function(){return{track:{artist:{userName:"",account:""},likes:[],comments:[]},likeState:!1,followState:!1,overlay:!1,direction:"left",fab:!1,fling:!1,hover:!1,tabs:null,top:!0,right:!0,bottom:!1,left:!1,transition:"scale-transition",tab:null,newComment:"",dialogAdd:!1,dialogCreate:!1,items:[],playlists:[],nowSongId:"",seletedPlaylist:"",form:{title:"",description:""},valid:!0,titleRule:[function(t){return!!t||"必填欄位"}],playingSong:{title:"",artist:"",file:"",cover:"",_id:""}}},watch:{top:function(t){this.bottom=!t},right:function(t){this.left=!t},bottom:function(t){this.top=!t},left:function(t){this.right=!t}},methods:{play:function(t){this.playingSong={_id:this.track._id,title:this.track.title,artist:this.track.artist.userName,file:this.track.file,cover:this.track.cover},this.$store.commit("track/play",this.playingSong)},getTrackById:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/tracks/"+t.$route.params.id,{headers:{authorization:"Bearer "+t.user.token}});case 3:r=e.sent,a=r.data,t.track=a.result,t.track.uploadDate=a.result.uploadDate.slice(0,10),void 0!==t.user.likes&&t.user.likes.some((function(e){return e.tracks===t.track._id}))?t.likeState=!0:t.likeState=!1,i=t.user.following,void 0!==i&&i.some((function(e){return e.users===t.track.artist._id}))?t.followState=!0:t.followState=!1,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},likes:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t.user.isLogin){e.next=4;break}return e.next=4,t.api.patch("/users/likes/"+t.user._id,{_id:t.$route.params.id},{headers:{authorization:"Bearer "+t.user.token}});case 4:return e.next=6,t.$store.dispatch("user/getUserInfo");case 6:return e.next=8,t.getTrackById();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},follow:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.patch("/users/follow/"+t.user.id,{_id:t.track.artist._id},{headers:{authorization:"Bearer "+t.user.token}});case 3:return e.next=5,t.$store.dispatch("user/getUserInfo");case 5:return e.next=7,t.getTrackById();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},comment:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,r={users:t.user._id,message:t.newComment.trim(),date:Date.now()},!(r.message.length>0)){e.next=10;break}return e.next=5,t.api.patch("/tracks/comment/"+t.$route.params.id,r,{headers:{authorization:"Bearer "+t.user.token}});case 5:t.getTrackById(),t.newComment="",t.$swal({icon:"success",title:"成功",text:"留言成功"}),e.next=11;break;case 10:t.$swal({icon:"info",title:"錯誤",text:"留言不能空白"});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),t.$swal({icon:"info",title:"請先登入",text:e.t0.response.data.message});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},getSongId:function(t){this.user.isLogin&&(this.dialogAdd=!0,this.nowSongId=t)},getUserPlaylist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0===t.user._id.length){e.next=13;break}return e.prev=1,e.next=4,t.api.get("/playlists?owner="+t.user._id);case 4:for(r=e.sent,a=r.data,t.playlists=a.result,i=0;i<t.playlists.length;i++)t.items.push(a.result[i].title);e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t.$swal({icon:"error",title:"錯誤",text:"取得歌單失敗"});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},addToPlaylist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.playlists.findIndex((function(e){return e.title===t.seletedPlaylist})),a=t.playlists[r]._id,e.prev=2,!t.user.isLogin){e.next=9;break}return e.next=6,t.api.patch("/playlists/addsong/"+a,{_id:t.nowSongId},{headers:{authorization:"Bearer "+t.user.token}});case 6:t.dialogAdd=!1,t.seletedPlaylist="",t.$swal({icon:"success",title:"成功",text:"加入成功"});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))()},createPlaylist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.post("/playlists",{title:t.form.title,description:t.form.description},{headers:{authorization:"Bearer "+t.user.token}});case 3:t.getUserPlaylist(),t.$swal({icon:"success",title:"成功",text:"新增成功"}),t.resetForm(),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},resetForm:function(){this.dialogCreate=!1,this.$refs.form.resetValidation(),this.form={title:"",description:""}}},computed:{randomAvatar:function(){if(null===this.track.artist.avatar)return"https://source.boringavatars.com/beam/"+this.track.artist.account},likeIcon:function(){return this.likeState?"mdi-heart":"mdi-heart-outline"}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getTrackById(),t.getUserPlaylist();case 2:case"end":return e.stop()}}),e)})))()}}),o=n,l=r("2877"),c=r("6544"),u=r.n(c),d=r("8212"),v=r("8336"),p=r("b0af"),f=r("99d9"),m=r("cc20"),h=r("62ad"),g=r("169a"),b=r("ce7e"),x=r("0789"),y=r("4bd4"),w=r("ce87"),k=r("132d"),_=r("adda"),C=r("a797"),$=r("0fd9"),P=r("b974"),S=r("8dd9"),V=r("2fa4"),O=r("ade3"),j=(r("caad"),r("c7cd"),r("d81d"),r("b0c0"),r("8cd0"),r("f2e7")),R=r("fe6c"),I=r("2b0e"),A=I["default"].extend({name:"transitionable",props:{mode:String,origin:String,transition:String}}),F=r("a293"),L=r("58df"),T=Object(L["a"])(R["a"],j["a"],A).extend({name:"v-speed-dial",directives:{ClickOutside:F["a"]},props:{direction:{type:String,default:"top",validator:function(t){return["top","right","bottom","left"].includes(t)}},openOnHover:Boolean,transition:{type:String,default:"scale-transition"}},computed:{classes:function(){var t;return t={"v-speed-dial":!0,"v-speed-dial--top":this.top,"v-speed-dial--right":this.right,"v-speed-dial--bottom":this.bottom,"v-speed-dial--left":this.left,"v-speed-dial--absolute":this.absolute,"v-speed-dial--fixed":this.fixed},Object(O["a"])(t,"v-speed-dial--direction-".concat(this.direction),!0),Object(O["a"])(t,"v-speed-dial--is-active",this.isActive),t}},render:function(t){var e=this,r=[],a={class:this.classes,directives:[{name:"click-outside",value:function(){return e.isActive=!1}}],on:{click:function(){return e.isActive=!e.isActive}}};if(this.openOnHover&&(a.on.mouseenter=function(){return e.isActive=!0},a.on.mouseleave=function(){return e.isActive=!1}),this.isActive){var i=0;r=(this.$slots.default||[]).map((function(e,r){return!e.tag||"undefined"===typeof e.componentOptions||"v-btn"!==e.componentOptions.Ctor.options.name&&"v-tooltip"!==e.componentOptions.Ctor.options.name?(e.key=r,e):(i++,t("div",{style:{transitionDelay:.05*i+"s"},key:r},[e]))}))}var s=t("transition-group",{class:"v-speed-dial__list",props:{name:this.transition,mode:this.mode,origin:this.origin,tag:"div"}},r);return t("div",a,[this.$slots.activator,s])}}),D=r("71a3"),B=r("c671"),M=r("fe57"),E=r("aac8"),z=r("8654"),q=r("a844"),N=Object(l["a"])(o,a,i,!1,null,null,null);e["default"]=N.exports;u()(N,{VAvatar:d["a"],VBtn:v["a"],VCard:p["a"],VCardActions:f["a"],VCardText:f["c"],VCardTitle:f["d"],VChip:m["a"],VCol:h["a"],VDialog:g["a"],VDivider:b["a"],VFadeTransition:x["d"],VForm:y["a"],VHover:w["a"],VIcon:k["a"],VImg:_["a"],VOverlay:C["a"],VRow:$["a"],VSelect:P["a"],VSheet:S["a"],VSpacer:V["a"],VSpeedDial:T,VTab:D["a"],VTabItem:B["a"],VTabs:M["a"],VTabsItems:E["a"],VTextField:z["a"],VTextarea:q["a"]})},"91d3":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":";return(0,a.withParams)({type:"macAddress"},(function(e){if(!(0,a.req)(e))return!0;if("string"!==typeof e)return!1;var r="string"===typeof t&&""!==t?e.split(t):12===e.length||16===e.length?e.match(/.{2}/g):null;return null!==r&&(6===r.length||8===r.length)&&r.every(s)}))};e.default=i;var s=function(t){return t.toLowerCase().match(/^[0-9a-f]{2}$/)}},aa82:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=function(t){return(0,a.withParams)({type:"requiredIf",prop:t},(function(e,r){return!(0,a.ref)(t,this,r)||(0,a.req)(e)}))};e.default=i},ac5b:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"log-container xyCenter my-container"},[r("v-row",{staticClass:"xyCenter"},[r("v-col",{attrs:{cols:"12",lg:"8"}},[r("v-card",{staticClass:"mx-auto",attrs:{outlined:"","max-width":"800"}},[r("v-window",{model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[r("v-window-item",{attrs:{value:1}},[r("v-row",{staticClass:"center flex-sm-row"},[r("v-col",{staticClass:"pa-10 theme-btn xyCenter change-form d-none d-sm-flex",attrs:{cols:"12",sm:"6"}},[r("div",{staticClass:"xyCenter flex-column"},[r("h3",{staticClass:"text-center my-8"},[t._v("還沒有註冊嗎？")]),r("v-card-actions",{staticClass:"xyCenter"},[r("v-btn",{attrs:{outlined:"",rounded:"",width:"100",color:"blue-gray"},on:{click:function(e){t.step++}}},[t._v("註冊")])],1)],1)]),r("v-col",{staticClass:"pa-10 flex-sm-row xyCenter",staticStyle:{width:"100%"},attrs:{cols:"12",sm:"6"}},[r("v-form",{on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[r("h2",[t._v("會員登入")]),r("v-text-field",{staticClass:"my-2",attrs:{"error-messages":t.loginAccountErrors,counter:20,label:"帳號",required:"",type:"text"},on:{input:function(e){return t.$v.loginForm.account.$touch()},blur:function(e){return t.$v.loginForm.account.$touch()}},model:{value:t.loginForm.account,callback:function(e){t.$set(t.loginForm,"account",e)},expression:"loginForm.account"}}),r("v-text-field",{staticClass:"my-2",attrs:{"append-icon":t.show?"mdi-eye":"mdi-eye-off","error-messages":t.loginPasswordErrors,counter:20,label:"密碼",type:t.show?"text":"password",required:""},on:{"click:append":function(e){t.show=!t.show},input:function(e){return t.$v.loginForm.password.$touch()},blur:function(e){return t.$v.loginForm.password.$touch()}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}}),r("v-btn",{staticClass:"mr-4 mt-8 white--text",attrs:{type:"submit",rounded:"",width:"100",color:"#66BB6A"}},[t._v("登入")]),r("v-btn",{staticClass:"mt-8 d-sm-none",attrs:{outlined:"",rounded:"",width:"100",color:"blue-gray"},on:{click:function(e){t.step++}}},[t._v("註冊")])],1)],1)],1)],1),r("v-window-item",{attrs:{value:2}},[r("v-row",{staticClass:"flex-column flex-sm-row"},[r("v-col",{staticClass:"pa-16 align-center d-flex",attrs:{cols:"12",sm:"6"}},[r("v-form",{staticStyle:{width:"100%"},on:{submit:function(e){return e.preventDefault(),t.register.apply(null,arguments)}}},[r("h2",[t._v("會員註冊")]),r("v-text-field",{staticClass:"my-2",attrs:{"error-messages":t.registerAccountErrors,counter:20,label:"帳號",required:"",type:"text"},on:{input:function(e){return t.$v.registerForm.account.$touch()},blur:function(e){return t.$v.registerForm.account.$touch()}},model:{value:t.registerForm.account,callback:function(e){t.$set(t.registerForm,"account",e)},expression:"registerForm.account"}}),r("v-text-field",{staticClass:"my-2",attrs:{"error-messages":t.registerEmailErrors,label:"信箱",required:"",type:"text"},on:{input:function(e){return t.$v.registerForm.email.$touch()},blur:function(e){return t.$v.registerForm.email.$touch()}},model:{value:t.registerForm.email,callback:function(e){t.$set(t.registerForm,"email",e)},expression:"registerForm.email"}}),r("v-text-field",{staticClass:"my-2",attrs:{"error-messages":t.registerPasswordErrors,counter:20,label:"密碼",type:"password",required:""},on:{input:function(e){return t.$v.registerForm.password.$touch()},blur:function(e){return t.$v.registerForm.password.$touch()}},model:{value:t.registerForm.password,callback:function(e){t.$set(t.registerForm,"password",e)},expression:"registerForm.password"}}),r("v-text-field",{staticClass:"my-2",attrs:{"error-messages":t.confirmPasswordErrors,counter:20,label:"確認密碼",type:"password",required:""},on:{input:function(e){return t.$v.registerForm.confirmPassword.$touch()},blur:function(e){return t.$v.registerForm.confirmPassword.$touch()}},model:{value:t.registerForm.confirmPassword,callback:function(e){t.$set(t.registerForm,"confirmPassword",e)},expression:"registerForm.confirmPassword"}}),r("v-btn",{staticClass:"mr-4 white--text",attrs:{type:"submit",rounded:"",width:"100",color:"#66BB6A"}},[t._v("註冊")]),r("v-btn",{staticClass:"d-sm-none",attrs:{outlined:"",rounded:"",width:"100",color:"blue-gray"},on:{click:function(e){t.step--}}},[t._v("登入")])],1)],1),r("v-col",{staticClass:"pa-16 theme-btn xyCenter change-form d-none d-sm-flex",attrs:{cols:"12",sm:"6"}},[r("div",{staticClass:"xyCenter flex-column"},[r("h3",{staticClass:"text-center my-10"},[t._v("已經註冊過了？")]),r("v-card-actions",{staticClass:"xyCenter"},[r("v-btn",{attrs:{outlined:"",rounded:"",width:"100",color:"blue-gray"},on:{click:function(e){t.step--}}},[t._v("登入")])],1)],1)])],1)],1)],1)],1)],1)],1)],1)},i=[],s=r("1da1"),n=(r("96cf"),r("ac1f"),r("5319"),r("1dce")),o=r("b5ae"),l={mixins:[n["validationMixin"]],validations:{registerForm:{account:{required:o["required"],minLength:Object(o["minLength"])(4),maxLength:Object(o["maxLength"])(20)},password:{required:o["required"],minLength:Object(o["minLength"])(4),maxLength:Object(o["maxLength"])(20)},email:{required:o["required"],email:o["email"]},confirmPassword:{required:o["required"],sameAsPassword:Object(o["sameAs"])("password")}},loginForm:{account:{required:o["required"],minLength:Object(o["minLength"])(4),maxLength:Object(o["maxLength"])(20)},password:{required:o["required"],minLength:Object(o["minLength"])(4),maxLength:Object(o["maxLength"])(20)}}},data:function(){return{show:!1,step:1,registerForm:{account:"",password:"",email:"",confirmPassword:""},loginForm:{account:"",password:""}}},computed:{registerAccountErrors:function(){var t=[];return this.$v.registerForm.account.$dirty?(!this.$v.registerForm.account.minLength&&t.push("帳號長度至少4個字"),!this.$v.registerForm.account.maxLength&&t.push("帳號長度不超過20個字"),!this.$v.registerForm.account.required&&t.push("必填欄位"),t):t},registerPasswordErrors:function(){var t=[];return this.$v.registerForm.password.$dirty?(!this.$v.registerForm.password.minLength&&t.push("密碼長度至少4個字"),!this.$v.registerForm.password.maxLength&&t.push("密碼長度不超過20個字"),!this.$v.registerForm.password.required&&t.push("必填欄位"),t):t},registerEmailErrors:function(){var t=[];return this.$v.registerForm.email.$dirty?(!this.$v.registerForm.email.email&&t.push("信箱格式不符"),!this.$v.registerForm.email.required&&t.push("必填欄位"),t):t},confirmPasswordErrors:function(){var t=[];return this.$v.registerForm.confirmPassword.$dirty?(!this.$v.registerForm.confirmPassword.sameAsPassword&&t.push("請輸入相同密碼"),!this.$v.registerForm.confirmPassword.required&&t.push("必填欄位"),t):t},loginAccountErrors:function(){var t=[];return this.$v.loginForm.account.$dirty?(!this.$v.loginForm.account.minLength&&t.push("帳號長度至少4個字"),!this.$v.loginForm.account.maxLength&&t.push("帳號長度不超過20個字"),!this.$v.loginForm.account.required&&t.push("必填欄位"),t):t},loginPasswordErrors:function(){var t=[];return this.$v.loginForm.password.$dirty?(!this.$v.loginForm.password.minLength&&t.push("密碼長度至少4個字"),!this.$v.loginForm.password.maxLength&&t.push("密碼長度不超過20個字"),!this.$v.loginForm.password.required&&t.push("必填欄位"),t):t}},watch:{step:function(t){1===t?(this.$router.replace({params:{action:"login"}}).catch((function(){})),this.$v.registerForm.$reset()):(this.$router.replace({params:{action:"register"}}).catch((function(){})),this.$v.loginForm.$reset())}},methods:{register:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$v.registerForm.$touch(),!t.$v.registerForm.$invalid){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,t.api.post("/users",{account:t.registerForm.account,password:t.registerForm.password,email:t.registerForm.email});case 6:t.$swal({icon:"success",title:"成功",text:"註冊成功",confirmButtonColor:"#4DB6AC"}),t.step--,t.registerForm.account="",t.registerForm.password="",t.registerForm.email="",t.registerForm.confirmPassword="",t.$v.registerForm.$reset(),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](3),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message,confirmButtonColor:"#4DB6AC"});case 18:case"end":return e.stop()}}),e,null,[[3,15]])})))()},login:function(){this.$store.dispatch("user/login",this.loginForm)}},created:function(){"login"===this.$route.params.action?this.step=1:"register"===this.$route.params.action&&(this.step=2)}},c=l,u=(r("ee06"),r("2877")),d=r("6544"),v=r.n(d),p=r("8336"),f=r("b0af"),m=r("99d9"),h=r("62ad"),g=r("4bd4"),b=r("0fd9"),x=r("8654"),y=r("f665"),w=r("1e6c"),k=Object(u["a"])(c,a,i,!1,null,"7108c072",null);e["default"]=k.exports;v()(k,{VBtn:p["a"],VCard:f["a"],VCardActions:m["a"],VCol:h["a"],VForm:g["a"],VRow:b["a"],VTextField:x["a"],VWindow:y["a"],VWindowItem:w["a"]})},b5ae:function(t,e,r){"use strict";function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"alpha",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"alphaNum",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"and",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(e,"between",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"decimal",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(e,"email",{enumerable:!0,get:function(){return l.default}}),e.helpers=void 0,Object.defineProperty(e,"integer",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(e,"ipAddress",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"macAddress",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"maxLength",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"maxValue",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(e,"minLength",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"minValue",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(e,"not",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"numeric",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"or",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(e,"required",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"requiredIf",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"requiredUnless",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"sameAs",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"url",{enumerable:!0,get:function(){return g.default}});var i=V(r("6235")),s=V(r("3a54")),n=V(r("45b8")),o=V(r("ec11")),l=V(r("5d75")),c=V(r("c99d")),u=V(r("91d3")),d=V(r("2a12")),v=V(r("5db3")),p=V(r("d4f4")),f=V(r("aa82")),m=V(r("e652")),h=V(r("b6cb")),g=V(r("772d")),b=V(r("d294")),x=V(r("3360")),y=V(r("6417")),w=V(r("eb66")),k=V(r("46bc")),_=V(r("1331")),C=V(r("c301")),$=S(r("78ef"));function P(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(P=function(t){return t?r:e})(t)}function S(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!==typeof t)return{default:t};var r=P(e);if(r&&r.has(t))return r.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if("default"!==n&&Object.prototype.hasOwnProperty.call(t,n)){var o=s?Object.getOwnPropertyDescriptor(t,n):null;o&&(o.get||o.set)?Object.defineProperty(i,n,o):i[n]=t[n]}return i.default=t,r&&r.set(t,i),i}function V(t){return t&&t.__esModule?t:{default:t}}e.helpers=$},b6cb:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=function(t){return(0,a.withParams)({type:"sameAs",eq:t},(function(e,r){return e===(0,a.ref)(t,this,r)}))};e.default=i},c301:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=(0,a.regex)("decimal",/^[-]?\d*(\.\d+)?$/);e.default=i},c626:function(t,e,r){},c99d:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=(0,a.withParams)({type:"ipAddress"},(function(t){if(!(0,a.req)(t))return!0;if("string"!==typeof t)return!1;var e=t.split(".");return 4===e.length&&e.every(s)}));e.default=i;var s=function(t){if(t.length>3||0===t.length)return!1;if("0"===t[0]&&"0"!==t)return!1;if(!t.match(/^\d+$/))return!1;var e=0|+t;return e>=0&&e<=255}},cb69:function(t,e,r){"use strict";(function(t){function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.withParams=void 0;var a="undefined"!==typeof window?window:"undefined"!==typeof t?t:{},i=function(t,e){return"object"===r(t)&&void 0!==e?e:t((function(){}))},s=a.vuelidate?a.vuelidate.withParams:i;e.withParams=s}).call(this,r("c8ba"))},ce87:function(t,e,r){"use strict";var a=r("16b7"),i=r("f2e7"),s=r("58df"),n=r("d9bd");e["a"]=Object(s["a"])(a["a"],i["a"]).extend({name:"v-hover",props:{disabled:{type:Boolean,default:!1},value:{type:Boolean,default:void 0}},methods:{onMouseEnter:function(){this.runDelay("open")},onMouseLeave:function(){this.runDelay("close")}},render:function(){return this.$scopedSlots.default||void 0!==this.value?(this.$scopedSlots.default&&(t=this.$scopedSlots.default({hover:this.isActive})),Array.isArray(t)&&1===t.length&&(t=t[0]),t&&!Array.isArray(t)&&t.tag?(this.disabled||(t.data=t.data||{},this._g(t.data,{mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})),t):(Object(n["c"])("v-hover should only contain a single element",this),t)):(Object(n["c"])("v-hover is missing a default scopedSlot or bound value",this),null);var t}})},d294:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return(0,a.withParams)({type:"or"},(function(){for(var t=this,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e.length>0&&e.reduce((function(e,r){return e||r.apply(t,a)}),!1)}))};e.default=i},d4f4:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=(0,a.withParams)({type:"required"},(function(t){return"string"===typeof t?(0,a.req)(t.trim()):(0,a.req)(t)}));e.default=i},db84:function(t,e,r){"use strict";r("29d5")},e652:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=function(t){return(0,a.withParams)({type:"requiredUnless",prop:t},(function(e,r){return!!(0,a.ref)(t,this,r)||(0,a.req)(e)}))};e.default=i},e705:function(t,e,r){},eb66:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=function(t){return(0,a.withParams)({type:"minValue",min:t},(function(e){return!(0,a.req)(e)||(!/\s/.test(e)||e instanceof Date)&&+e>=+t}))};e.default=i},ec11:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r("78ef"),i=function(t,e){return(0,a.withParams)({type:"between",min:t,max:e},(function(r){return!(0,a.req)(r)||(!/\s/.test(r)||r instanceof Date)&&+t<=+r&&+e>=+r}))};e.default=i},ec5a:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("BannerCarousel"),r("div",{staticClass:"my-container"},[r("v-row",[r("v-col",{staticClass:"px-4",attrs:{cols:"12",md:"4"}},[r("DaySong")],1),r("v-col",{attrs:{cols:"12",md:"8"}},[r("Instant")],1)],1),r("v-divider",{attrs:{color:"white"}}),r("v-row",[r("v-col",[r("HomeList")],1)],1),r("v-divider",{attrs:{color:"white"}}),r("v-row",[r("v-col",[r("HomeEvent")],1)],1)],1)],1)},i=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"bannerCarousel"}},[r("swiper",{ref:"mySwiper",attrs:{options:t.swiperOptions,breakpoints:t.swiperOptions.breakpoints}},[t._l(t.banners,(function(t){return r("swiper-slide",{key:t._id},[r("img",{attrs:{src:t.bannerImage}})])})),r("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"}),r("div",{staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"}),r("div",{staticClass:"swiper-button-prev",attrs:{slot:"button-prev"},slot:"button-prev"})],2)],1)},n=[],o=r("1da1"),l=(r("96cf"),r("7212")),c=(r("a7a3"),{name:"carrousel",data:function(){return{banners:[],swiperOptions:{pagination:{el:".swiper-pagination",clickable:!0},loop:!0,autoplay:{delay:8e3,disableOnInteraction:!1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}}},components:{Swiper:l["Swiper"],SwiperSlide:l["SwiperSlide"]},computed:{swiper:function(){return this.$refs.mySwiper.$swiper}},mountd:function(){console.log("Current Swiper instance object",this.swiper),this.swiper.slideTo(3,1e3,!1)},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/banners");case 3:r=e.sent,a=r.data,t.banners=a.result,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}),u=c,d=r("2877"),v=Object(d["a"])(u,s,n,!1,null,null,null),p=v.exports,f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"daySong"}},[r("v-card",{staticClass:"mx-auto my-12",attrs:{dark:""}},[r("v-card-title",[t._v("Song of the Day")]),r("router-link",{attrs:{to:"/track/"+t.renderSongID}},[r("v-img",{attrs:{"max-height":"400","max-width":"100%",src:t.track.cover}})],1),r("div",{staticClass:"d-flex align-center justify-space-between"},[r("v-card-title",[t._v(t._s(t.track.title))]),t.user.isAdmin?r("v-card-actions",[r("v-btn",{attrs:{small:""},on:{click:function(e){return t.openEdit()}}},[r("v-icon",{attrs:{small:""}},[t._v("mdi-pencil")])],1)],1):t._e()],1),r("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-card-title",[t._v("請輸入歌曲ID")]),r("v-card-text",[r("v-text-field",{attrs:{label:"歌曲ID",outlined:""},model:{value:t.modelSongID,callback:function(e){t.modelSongID=e},expression:"modelSongID"}})],1),r("v-card-actions",{staticClass:"justify-end"},[r("v-btn",{on:{click:function(e){t.dialog=!1}}},[t._v("取消")]),r("v-btn",{attrs:{color:"success"},on:{click:function(e){return t.submitID()}}},[t._v("確定")])],1),r("v-divider")],1)],1),r("v-card-subtitle",[t._v(t._s(t.track.artist.userName))]),r("v-divider",{staticClass:"mx-4"}),r("v-card-actions",{staticClass:"pa-4 d-flex align-center"},[r("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:t.play}},[r("v-icon",[t._v("mdi-play-circle")])],1),r("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:t.likes}},[r("v-icon",[t._v(t._s(t.likeIcon))])],1),r("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.getSongId(t.track._id)}}},[r("v-icon",[t._v("mdi-plus")])],1)],1)],1),r("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.dialogAdd,callback:function(e){t.dialogAdd=e},expression:"dialogAdd"}},[r("v-card",[r("v-card-title",[t._v("選擇想加入的歌單")]),r("v-divider"),r("v-card-text",{staticClass:"py-10"},[r("v-form",{ref:"form"},[r("v-select",{attrs:{items:t.playlistItems,label:"歌單名稱",outlined:"",rules:t.titleRule},model:{value:t.seletedPlaylist,callback:function(e){t.seletedPlaylist=e},expression:"seletedPlaylist"}})],1)],1),r("v-card-text",{staticClass:"d-flex justify-space-between"},[r("div",[r("div",{staticClass:"mb-2"},[t._v("沒有適合的歌單？")]),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.dialogAdd=!1,t.dialogCreate=!0}}},[t._v("建立歌單")])],1),r("div",{staticClass:"mt-7"},[r("v-btn",{on:{click:function(e){t.dialogAdd=!1}}},[t._v("取消")]),r("v-btn",{attrs:{color:"success ms-2"},on:{click:t.addToPlaylist}},[t._v("確定")])],1)])],1)],1),r("v-dialog",{attrs:{"max-width":"500"},model:{value:t.dialogCreate,callback:function(e){t.dialogCreate=e},expression:"dialogCreate"}},[r("v-card",[r("v-card-title",[t._v("建立歌單")]),r("v-divider"),r("v-card-text",[r("v-form",{ref:"form",staticClass:"px-10"},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-row",{staticClass:"text-body-1 align-center"},[r("v-col",{attrs:{cols:"3"}},[t._v("歌單名稱")]),r("v-col",{attrs:{cols:"9"}},[r("v-text-field",{attrs:{clearable:"",rules:t.titleRule},model:{value:t.playListForm.title,callback:function(e){t.$set(t.playListForm,"title",e)},expression:"playListForm.title"}})],1)],1),r("v-row",{staticClass:"text-body-1"},[r("v-col",{attrs:{cols:"3"}},[t._v("簡介")]),r("v-col",{attrs:{cols:"9"}},[r("v-textarea",{attrs:{outlined:""},model:{value:t.playListForm.description,callback:function(e){t.$set(t.playListForm,"description",e)},expression:"playListForm.description"}})],1)],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:t.resetForm}},[t._v("Cancel")]),r("v-btn",{attrs:{color:"primary",text:"",type:"submit"},on:{click:t.createPlaylist}},[t._v("Save")])],1)],1)],1)],1)},m=[],h=(r("d3b7"),r("c740"),r("a4d3"),r("e01a"),{data:function(){return{dialog:!1,renderSongID:"621638c855e85f096ff5c83f",modelSongID:"",likeState:!1,track:{title:"",artist:"",cover:"",_id:""},playingSong:{title:"",artist:"",file:"",cover:"",_id:""},dialogAdd:!1,dialogCreate:!1,playlistItems:[],playlists:[],nowSongId:"",seletedPlaylist:"",playListForm:{title:"",description:""},valid:!0,titleRule:[function(t){return!!t||"必填欄位"}]}},methods:{play:function(){this.playingSong={_id:this.track._id,title:this.track.title,artist:this.track.artist.userName,file:this.track.file,cover:this.track.cover},console.log(this.playingSong),this.$store.commit("track/play",this.playingSong)},openEdit:function(){this.dialog=!0,this.modelSongID=this.renderSongID},submitID:function(){this.renderSongID=this.modelSongID,this.dialog=!1,this.getDaySong()},getDaySong:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/tracks/"+t.renderSongID,{headers:{authorization:"Bearer "+t.user.token}});case 3:r=e.sent,a=r.data,t.track=a.result,""!==t.user.likes&&t.user.likes.some((function(e){return e.tracks===t.track._id}))?t.likeState=!0:t.likeState=!1,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},likes:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t.user.isLogin){e.next=4;break}return e.next=4,t.api.patch("/users/likes/"+t.user._id,{_id:t.renderSongID},{headers:{authorization:"Bearer "+t.user.token}});case 4:return e.next=6,t.$store.dispatch("user/getUserInfo");case 6:t.getDaySong(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},getSongId:function(t){this.user.isLogin&&(this.dialogAdd=!0,this.nowSongId=t)},getUserPlaylist:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0===t.user._id.length){e.next=13;break}return e.prev=1,e.next=4,t.api.get("/playlists?owner="+t.user._id);case 4:for(r=e.sent,a=r.data,t.playlists=a.result,i=0;i<t.playlists.length;i++)t.playlistItems.push(a.result[i].title);e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t.$swal({icon:"error",title:"錯誤",text:"取得歌單失敗"});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},addToPlaylist:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.playlists.findIndex((function(e){return e.title===t.seletedPlaylist})),a=t.playlists[r]._id,e.prev=2,!t.user.isLogin){e.next=9;break}return e.next=6,t.api.patch("/playlists/addsong/"+a,{_id:t.nowSongId},{headers:{authorization:"Bearer "+t.user.token}});case 6:t.dialogAdd=!1,t.seletedPlaylist="",t.$swal({icon:"success",title:"成功",text:"加入成功"});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))()},createPlaylist:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.post("/playlists",{title:t.playListForm.title,description:t.playListForm.description},{headers:{authorization:"Bearer "+t.user.token}});case 3:t.getUserPlaylist(),t.$swal({icon:"success",title:"成功",text:"新增成功"}),t.resetForm(),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},resetForm:function(){this.dialogCreate=!1,this.$refs.form.resetValidation(),this.form={title:"",description:""}}},computed:{likeIcon:function(){return this.likeState?"mdi-heart":"mdi-heart-outline"}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getDaySong(),t.getUserPlaylist();case 2:case"end":return e.stop()}}),e)})))()}}),g=h,b=r("6544"),x=r.n(b),y=r("8336"),w=r("b0af"),k=r("99d9"),_=r("62ad"),C=r("169a"),$=r("ce7e"),P=r("4bd4"),S=r("132d"),V=r("adda"),O=r("0fd9"),j=r("b974"),R=r("2fa4"),I=r("8654"),A=r("a844"),F=Object(d["a"])(g,f,m,!1,null,null,null),L=F.exports;x()(F,{VBtn:y["a"],VCard:w["a"],VCardActions:k["a"],VCardSubtitle:k["b"],VCardText:k["c"],VCardTitle:k["d"],VCol:_["a"],VDialog:C["a"],VDivider:$["a"],VForm:P["a"],VIcon:S["a"],VImg:V["a"],VRow:O["a"],VSelect:j["a"],VSpacer:R["a"],VTextField:I["a"],VTextarea:A["a"]});var T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"instantRank my-12 d-flex flex-column justify-center pb-16",staticStyle:{"background-color":"#1e1e1e",color:"white",position:"relative"}},[r("ul",[r("li",{staticClass:"py-4 fs-20"},[t._v("Top 10")]),t._l(t.sortItems,(function(e,a){return r("li",{key:a,staticClass:"d-flex align-center"},[r("div",{staticClass:"instantNum"},[t._v(t._s(a+1))]),r("router-link",{staticClass:"d-none d-sm-flex align-center",attrs:{to:"/track/"+e._id}},[r("img",{attrs:{src:e.cover}})]),r("div",{staticClass:"d-block d-sm-none"},[r("v-hover",{scopedSlots:t._u([{key:"default",fn:function(i){var s=i.hover;return[r("v-img",{attrs:{width:"80",src:e.cover}},[r("v-fade-transition",[s?r("v-overlay",{attrs:{absolute:"",color:"#d7f3f5"}},[r("v-icon",{attrs:{"x-large":""},on:{click:function(e){return t.play(a)}}},[t._v("mdi-play-circle-outline")])],1):t._e()],1)],1)]}}],null,!0)})],1),r("div",{staticClass:"me-auto"},[r("div",{staticClass:"ms-2"},[t._v(t._s(e.title))]),r("div",{staticClass:"ms-2 text-body-2"},[t._v(t._s(e.artist.userName))])]),r("div",{staticClass:"d-none d-sm-flex xyCenter ",staticStyle:{width:"130px"}},[r("v-btn",{staticClass:"mx-1",attrs:{icon:"",color:"white"},on:{click:function(e){return t.play(a)}}},[r("v-icon",{attrs:{medium:""}},[t._v("mdi-play-circle")])],1),r("v-btn",{staticClass:"mx-1",attrs:{outlined:"",rounded:"",color:t.myLikes.includes(e._id)?"red":"white"},on:{click:function(r){return t.likes(e._id)}}},[t.myLikes.includes(e._id)?r("v-icon",{attrs:{small:""}},[t._v("mdi-cards-heart")]):r("v-icon",{attrs:{small:""}},[t._v("mdi-cards-heart-outline")]),r("div",{staticClass:"ms-2 d-sm-block"},[t._v(t._s(e.likes.length))])],1),r("v-btn",{staticClass:"mx-1",attrs:{icon:"",color:"white"},on:{click:function(r){return t.getSongId(e._id)}}},[r("v-icon",{attrs:{medium:""}},[t._v("mdi-plus")])],1)],1),r("div",{staticClass:"d-sm-none"},[r("v-btn",{attrs:{to:"/track/"+e._id,icon:"",small:"",color:"grey"}},[r("v-icon",{attrs:{small:""}},[t._v("mdi-music-box-multiple")])],1)],1)],1)}))],2),r("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.dialogAdd,callback:function(e){t.dialogAdd=e},expression:"dialogAdd"}},[r("v-card",[r("v-card-title",[t._v("選擇想加入的歌單")]),r("v-divider"),r("v-card-text",{staticClass:"py-10"},[r("v-form",{ref:"form"},[r("v-select",{attrs:{items:t.items,label:"歌單名稱",outlined:"",rules:t.titleRule},model:{value:t.seletedPlaylist,callback:function(e){t.seletedPlaylist=e},expression:"seletedPlaylist"}})],1)],1),r("v-card-text",{staticClass:"d-flex justify-space-between"},[r("div",[r("div",{staticClass:"mb-2"},[t._v("沒有適合的歌單？")]),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.dialogAdd=!1,t.dialogCreate=!0}}},[t._v("建立歌單")])],1),r("div",{staticClass:"mt-7"},[r("v-btn",{on:{click:function(e){t.dialogAdd=!1}}},[t._v("取消")]),r("v-btn",{attrs:{color:"success ms-2"},on:{click:t.addToPlaylist}},[t._v("確定")])],1)])],1)],1),r("v-dialog",{attrs:{"max-width":"500"},model:{value:t.dialogCreate,callback:function(e){t.dialogCreate=e},expression:"dialogCreate"}},[r("v-card",[r("v-card-title",[t._v("建立歌單")]),r("v-divider"),r("v-card-text",[r("v-form",{ref:"form",staticClass:"px-10"},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-row",{staticClass:"text-body-1 align-center"},[r("v-col",{attrs:{cols:"3"}},[t._v("歌單名稱")]),r("v-col",{attrs:{cols:"9"}},[r("v-text-field",{attrs:{clearable:"",rules:t.titleRule},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),r("v-row",{staticClass:"text-body-1"},[r("v-col",{attrs:{cols:"3"}},[t._v("簡介")]),r("v-col",{attrs:{cols:"9"}},[r("v-textarea",{attrs:{outlined:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:t.resetForm}},[t._v("取消")]),r("v-btn",{attrs:{color:"primary",text:"",type:"submit"},on:{click:t.createPlaylist}},[t._v("確認")])],1)],1)],1),r("router-link",{staticStyle:{display:"block"},attrs:{to:"ranks"}},[r("v-btn",{staticClass:"mx-auto mt-5",staticStyle:{width:"100px"},attrs:{elevation:"2",absolute:"",bottom:"",right:"",color:"white",outlined:""}},[t._v("more")])],1)],1)},D=[],B=(r("e9c4"),r("fb6a"),r("4e827"),{data:function(){return{overlay:!1,publicTracks:[],dialogAdd:!1,dialogCreate:!1,seletedPlaylist:"",form:{title:"",description:""},valid:!0,titleRule:[function(t){return!!t||"必填欄位"}],items:[],playlists:[],nowSongId:"",playingSong:{title:"",artist:"",file:"",cover:"",_id:""},myLikes:[]}},methods:{play:function(t){this.playingSong={_id:this.sortItems[t]._id,title:this.sortItems[t].title,artist:this.sortItems[t].artist.userName,file:this.sortItems[t].file,cover:this.sortItems[t].cover},this.$store.commit("track/play",this.playingSong)},getSongId:function(t){this.user.isLogin&&(this.dialogAdd=!0,this.nowSongId=t)},resetForm:function(){this.dialogCreate=!1,this.$refs.form.resetValidation(),this.form={title:"",description:""}},getAllPublic:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/tracks/public");case 3:r=e.sent,a=r.data,t.publicTracks=a.result,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得音樂失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},getUserPlaylist:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0===t.user._id.length){e.next=13;break}return e.prev=1,e.next=4,t.api.get("/playlists?owner="+t.user._id);case 4:for(r=e.sent,a=r.data,t.playlists=a.result,i=0;i<t.playlists.length;i++)t.items.push(a.result[i].title);e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t.$swal({icon:"error",title:"錯誤",text:"取得歌單失敗"});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},addToPlaylist:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.playlists.findIndex((function(e){return e.title===t.seletedPlaylist})),a=t.playlists[r]._id,e.prev=2,!t.user.isLogin){e.next=9;break}return e.next=6,t.api.patch("/playlists/addsong/"+a,{_id:t.nowSongId},{headers:{authorization:"Bearer "+t.user.token}});case 6:t.dialogAdd=!1,t.seletedPlaylist="",t.$swal({icon:"success",title:"成功",text:"加入成功"});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))()},createPlaylist:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.post("/playlists",{title:t.form.title,description:t.form.description},{headers:{authorization:"Bearer "+t.user.token}});case 3:t.getUserPlaylist(),t.$swal({icon:"success",title:"成功",text:"新增/修改成功"}),t.resetForm(),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},likes:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,!e.user.isLogin){r.next=4;break}return r.next=4,e.api.patch("/users/likes/"+e.user._id,{_id:t},{headers:{authorization:"Bearer "+e.user.token}});case 4:return r.next=6,e.getAllPublic();case 6:r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),e.$swal({icon:"error",title:"錯誤",text:r.t0.response.data.message});case 11:e.getMyLikes();case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()},getMyLikes:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("user/getUserInfo");case 2:for(t.myLikes=[],r=0;r<t.user.likes.length;r++)t.myLikes.push(t.user.likes[r].tracks);return e.abrupt("return",[]);case 5:case"end":return e.stop()}}),e)})))()}},computed:{sortItems:function(){var t=JSON.parse(JSON.stringify(this.publicTracks));return t.sort((function(t,e){return e.likes.length-t.likes.length})).slice(0,10)}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getMyLikes(),t.getAllPublic(),t.getUserPlaylist();case 3:case"end":return e.stop()}}),e)})))()}}),M=B,E=(r("4223"),r("0789")),z=r("ce87"),q=r("a797"),N=Object(d["a"])(M,T,D,!1,null,null,null),U=N.exports;x()(N,{VBtn:y["a"],VCard:w["a"],VCardActions:k["a"],VCardText:k["c"],VCardTitle:k["d"],VCol:_["a"],VDialog:C["a"],VDivider:$["a"],VFadeTransition:E["d"],VForm:P["a"],VHover:z["a"],VIcon:S["a"],VImg:V["a"],VOverlay:q["a"],VRow:O["a"],VSelect:j["a"],VSpacer:R["a"],VTextField:I["a"],VTextarea:A["a"]});var H=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"my-10",attrs:{id:"homePlaylist"}},[r("div",{staticClass:"white--text text-h5 text-center mb-10"},[t._v("推薦歌單")]),r("v-row",t._l(t.playlists,(function(e){return r("v-col",{key:e._id,staticClass:"px-16 px-md-2",attrs:{cols:"12",sm:"6",md:"3"}},[r("kinesis-container",[r("kinesis-element",{attrs:{strength:10,type:"depth"}},[r("v-card",{staticClass:"pb-2",attrs:{to:"/playlist/"+e._id,color:"transparent"}},[r("div",{staticClass:"homeList-img pa-6"},[r("v-img",{attrs:{src:e.cover}})],1),r("div",{staticClass:"homeList-title white--text text-h6 text-center mb-2"},[t._v(t._s(e.title))]),r("div",{staticClass:"homeList-descrition white--text text-center"},[t._v(t._s(e.description))]),r("div",{staticClass:"homeList-descrition grey--text text-center"},[t._v("published on "+t._s(e.createDate))])])],1)],1)],1)})),1)],1)},J=[],W=(r("ac1f"),r("5319"),r("a434"),{data:function(){return{admin:"61f80ddc3e24fd41116fc86d",playlists:[]}},methods:{getAdminPlaylists:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/playlists?owner="+t.admin);case 3:for(r=e.sent,a=r.data,t.playlists=a.result,i=0;i<t.playlists.length;i++)t.playlists[i].createDate=new Date(t.playlists[i].createDate).toLocaleDateString().replace(/\//g,".");t.playlists=t.playlists.splice(-4),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得歌單失敗"});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getAdminPlaylists();case 1:case"end":return e.stop()}}),e)})))()}}),Y=W,G=Object(d["a"])(Y,H,J,!1,null,null,null),Z=G.exports;x()(G,{VCard:w["a"],VCol:_["a"],VImg:V["a"],VRow:O["a"]});var K=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"homeEvent"}},[r("div",{staticClass:"fs-24 text-center white--text my-10"},[t._v("近期活動")]),r("swiper",{staticClass:"swiper",staticStyle:{width:"100%",height:"500px"},attrs:{options:t.swiperOption}},[t._l(t.events,(function(e,a){return r("swiper-slide",{key:a,staticClass:"xyCenter"},[r("v-card",{staticClass:"mx-auto event-card",staticStyle:{position:"relative"},attrs:{width:"800",to:"/events",color:"transparent"}},[r("div",[r("v-img",{staticClass:"align-end",staticStyle:{"border-radius":"4px 4px 0 0"},attrs:{height:"300px",src:e.cover}},[r("v-card-text",[r("v-chip",{attrs:{label:"",color:"#d7f3f5"}},[t._v(t._s(e.performer))])],1)],1)],1),r("v-card-title",{staticClass:"white--text"},[t._v(t._s(e.title))]),r("v-card-subtitle",{staticClass:"pb-0 grey--text"},[t._v(t._s(e.date))]),r("v-card-text",{staticClass:"white--text"},[r("div",[t._v(t._s(e.place))])])],1)],1)})),r("div",{staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"}),r("div",{staticClass:"swiper-button-prev",attrs:{slot:"button-prev"},slot:"button-prev"})],2),r("div",{attrs:{id:"copyright"}},[t._v(" 網站為學習用途，無商業使用。圖片音樂均取自網路(音樂僅為範例音樂不代表歌手作品) ")])],1)},Q=[],X={name:"swiper-example-free-mode",title:"Free mode / No fixed positions",components:{Swiper:l["Swiper"],SwiperSlide:l["SwiperSlide"]},data:function(){return{events:[],swiperOption:{direction:"vertical",autoplay:!0,slidesPerView:1,allowTouchMove:!1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}}},methods:{getAllEvents:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/events/all");case 3:for(r=e.sent,a=r.data,t.events=a.result,i=0;i<t.events.length;i++)t.events[i].date=new Date(t.events[i].date).toLocaleDateString().replace(/\//g,".");e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得活動資料失敗"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getAllEvents();case 1:case"end":return e.stop()}}),e)})))()}},tt=X,et=(r("5432"),r("cc20")),rt=Object(d["a"])(tt,K,Q,!1,null,null,null),at=rt.exports;x()(rt,{VCard:w["a"],VCardSubtitle:k["b"],VCardText:k["c"],VCardTitle:k["d"],VChip:et["a"],VImg:V["a"]});var it={name:"Home",components:{BannerCarousel:p,DaySong:L,Instant:U,HomeList:Z,HomeEvent:at},data:function(){return{}}},st=it,nt=Object(d["a"])(st,a,i,!1,null,null,null);e["default"]=nt.exports;x()(nt,{VCol:_["a"],VDivider:$["a"],VRow:O["a"]})},ee06:function(t,e,r){"use strict";r("e705")},ffc0:function(t,e,r){}}]);
//# sourceMappingURL=front.16bb1bdd.js.map