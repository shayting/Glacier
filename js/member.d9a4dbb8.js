(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["member"],{"4bd4":function(t,e,a){"use strict";var r=a("5530"),i=(a("caad"),a("2532"),a("07ac"),a("4de4"),a("d3b7"),a("159b"),a("7db0"),a("58df")),s=a("7e2b"),n=a("3206");e["a"]=Object(i["a"])(s["a"],Object(n["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,a=function(t){return t.$watch("hasError",(function(a){e.$set(e.errorBag,t._uid,a)}),{immediate:!0})},r={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?r.shouldValidate=t.$watch("shouldValidate",(function(i){i&&(e.errorBag.hasOwnProperty(t._uid)||(r.valid=a(t)))})):r.valid=a(t),r},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var a=this.watchers.find((function(t){return t._uid===e._uid}));a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(r["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},6686:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-5 my-sm-10 my-container"},[a("v-sheet",{staticClass:"myPlaylists mb-100 py-5 py-sm-10",staticStyle:{position:"relative"},attrs:{color:"secondary","min-height":"500",rounded:""}},[t.user._id===t.$route.params.id?a("v-dialog",{attrs:{width:"500",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"d-none d-sm-block theme-btn mt-sm-6 me-sm-12",attrs:{absolute:"",top:"",right:"",large:""}},"v-btn",i,!1),r),[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("建立歌單 ")],1),a("v-btn",t._g(t._b({staticClass:"d-sm-none theme-btn mt-sm-6 me-sm-12",attrs:{absolute:"",top:"",right:"",small:""}},"v-btn",i,!1),r),[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("歌單 ")],1)]}}],null,!1,307898092),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[t._v(t._s(0===t.form._id.length?"新增歌單":"編輯歌單"))]),a("v-divider"),a("v-card-text",{staticClass:"my-5"},[a("v-form",{ref:"form",staticClass:"px-5 px-sm-10"},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-row",{staticClass:"text-body-1 align-center"},[a("v-col",{attrs:{cols:"3"}},[t._v("歌單名稱")]),a("v-col",{attrs:{cols:"9"}},[a("v-text-field",{attrs:{clearable:"",rules:t.titleRule},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),a("v-row",{staticClass:"text-body-1"},[a("v-col",{attrs:{cols:"3"}},[t._v("簡介")]),a("v-col",{attrs:{cols:"9"}},[a("v-textarea",{attrs:{outlined:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){return t.resetForm()}}},[t._v("取消")]),a("v-btn",{attrs:{color:"primary",text:"",type:"submit"},on:{click:t.create}},[t._v("確定")])],1)],1)],1):t._e(),a("div",{staticClass:"white--text text-h4 px-8 px-sm-16 mb-10"},[t._v("Playlists")]),a("v-row",{staticClass:"px-8 px-sm-16"},t._l(t.playlists,(function(e,r){return a("v-col",{key:r,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[a("v-card",{staticClass:"pa-4",attrs:{color:"#111314"}},[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(r){var i=r.hover;return[0!==e.songs.length?a("v-img",{attrs:{src:e.songs[0].song.cover}},[a("v-fade-transition",[i?a("v-overlay",{attrs:{absolute:"",color:"#d7f3f5"}},[a("v-btn",{attrs:{icon:"",to:"/playlist/"+e._id}},[a("v-icon",{attrs:{"x-large":""}},[t._v("mdi-format-list-bulleted-square")])],1)],1):t._e()],1)],1):a("v-img",{attrs:{src:"https://source.boringavatars.com/marble/120/Maria%20Mitchell?square"}},[a("v-fade-transition",[i?a("v-overlay",{attrs:{absolute:"",color:"#d7f3f5"}},[a("v-btn",{attrs:{icon:"",to:"/playlist/"+e._id}},[a("v-icon",{attrs:{"x-large":""}},[t._v("mdi-format-list-bulleted-square")])],1)],1):t._e()],1)],1)]}}],null,!0)}),a("div",{staticClass:"white--text text-h6 mt-2"},[t._v(t._s(e.title))]),a("span",{staticClass:"grey--text text-body-2"},[t._v(t._s(e.songs.length)+"首歌")]),a("div",{staticClass:"d-flex justify-end"},[t.user._id===t.$route.params.id?a("v-btn",{attrs:{small:"",icon:"",color:"white"}},[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.openEditForm(r)}}},[t._v("mdi-pencil")])],1):t._e(),t.user._id===t.$route.params.id?a("v-btn",{attrs:{small:"",icon:"",color:"white"}},[a("v-icon",{attrs:{small:""},on:{click:function(a){return t.deletePlaylist(e._id)}}},[t._v("mdi-trash-can")])],1):t._e()],1)],1)],1)})),1)],1)],1)},i=[],s=a("1da1"),n=(a("96cf"),a("a4d3"),a("e01a"),{data:function(){return{playlists:[],form:{title:"",description:"",_id:""},valid:!0,titleRule:[function(t){return!!t||"必填欄位"}],dialog:!1}},methods:{openEditForm:function(t){this.dialog=!0,this.form={title:this.playlists[t].title,description:this.playlists[t].description,_id:this.playlists[t]._id}},resetForm:function(){this.dialog=!1,this.$refs.form.resetValidation(),this.form={title:"",description:"",_id:""}},create:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,0!==t.form._id.length){e.next=6;break}return e.next=4,t.api.post("/playlists",{title:t.form.title,description:t.form.description},{headers:{authorization:"Bearer "+t.user.token}});case 4:e.next=8;break;case 6:return e.next=8,t.api.patch("/playlists/"+t.form._id,{title:t.form.title,description:t.form.description},{headers:{authorization:"Bearer "+t.user.token}});case 8:t.getUserPlaylists(),t.$swal({icon:"success",title:"成功",text:"新增/修改成功"}),t.resetForm(),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()},getUserPlaylists:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/playlists?owner="+t.$route.params.id);case 3:a=e.sent,r=a.data,t.playlists=r.result,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得音樂失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},deletePlaylist:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$swal({icon:"warning",title:"刪除確認",text:"確定要刪除此歌單？",type:"warning",showCancelButton:!0,confirmButtonText:"刪除",cancelButtonText:"取消"}).then((function(a){a.isConfirmed?e.api.delete("/playlists/"+t,{headers:{authorization:"Bearer "+e.user.token}}).then((function(){e.getUserPlaylists(),e.$swal({icon:"success",title:"成功",text:"刪除成功"})})).catch((function(t){e.$swal({icon:"error",title:"失敗",text:t.message})})):e.$swal.close()}));case 1:case"end":return a.stop()}}),a)})))()}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getUserPlaylists();case 1:case"end":return e.stop()}}),e)})))()}}),o=n,l=a("2877"),c=a("6544"),u=a.n(c),d=a("8336"),v=a("b0af"),p=a("99d9"),m=a("62ad"),h=a("169a"),f=a("ce7e"),g=a("0789"),y=a("4bd4"),x=a("ce87"),b=a("132d"),k=a("adda"),w=a("a797"),_=a("0fd9"),C=a("8dd9"),V=a("2fa4"),$=a("8654"),R=a("a844"),S=Object(l["a"])(o,r,i,!1,null,null,null);e["default"]=S.exports;u()(S,{VBtn:d["a"],VCard:v["a"],VCardActions:p["a"],VCardText:p["c"],VCardTitle:p["d"],VCol:m["a"],VDialog:h["a"],VDivider:f["a"],VFadeTransition:g["d"],VForm:y["a"],VHover:x["a"],VIcon:b["a"],VImg:k["a"],VOverlay:w["a"],VRow:_["a"],VSheet:C["a"],VSpacer:V["a"],VTextField:$["a"],VTextarea:R["a"]})},"9d01":function(t,e,a){},a3bd:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-container"},[a("v-card",{staticClass:"white--text aboutMe mb-100",attrs:{elevation:"2","min-height":"500",color:"secondary"}},[a("v-card-title",{staticClass:"my-5 my-sm-10 px-8 px-sm-16 pt-5 pt-sm-10 text-h4"},[t._v("About")]),a("v-card-text",{staticClass:"white--text px-8 px-sm-16 text-body-1 text-wrapper"},[t._v(t._s(t.userPage.description))])],1)],1)},i=[],s=a("1da1"),n=(a("96cf"),a("a4d3"),a("e01a"),{data:function(){return{userPage:{}}},methods:{getOtherUser:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.api.get("/users/"+t.$route.params.id);case 2:a=e.sent,r=a.data,t.userPage={description:r.result.description};case 5:case"end":return e.stop()}}),e)})))()}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getOtherUser();case 1:case"end":return e.stop()}}),e)})))()}}),o=n,l=a("2877"),c=a("6544"),u=a.n(c),d=a("b0af"),v=a("99d9"),p=Object(l["a"])(o,r,i,!1,null,null,null);e["default"]=p.exports;u()(p,{VCard:d["a"],VCardText:v["c"],VCardTitle:v["d"]})},b73d:function(t,e,a){"use strict";var r=a("15fd"),i=a("5530"),s=(a("0481"),a("4069"),a("ec29"),a("9d01"),a("d3b7"),a("25f0"),a("4de4"),a("c37a")),n=a("5607"),o=a("2b0e"),l=o["default"].extend({name:"rippleable",directives:{ripple:n["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}}),c=a("8547"),u=a("58df");function d(t){t.preventDefault()}var v=Object(u["a"])(s["a"],l,c["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data:function(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor:function(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple:function(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive:function(){var t=this,e=this.value,a=this.internalValue;return this.isMultiple?!!Array.isArray(a)&&a.some((function(a){return t.valueComparator(a,e)})):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,a):Boolean(a):this.valueComparator(a,this.trueValue)},isDirty:function(){return this.isActive},rippleState:function(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue:function(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel:function(){var t=s["a"].options.methods.genLabel.call(this);return t?(t.data.on={click:d},t):t},genInput:function(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:d},ref:"input"})},onBlur:function(){this.isFocused=!1},onClick:function(t){this.onChange(),this.$emit("click",t)},onChange:function(){var t=this;if(this.isInteractive){var e=this.value,a=this.internalValue;if(this.isMultiple){Array.isArray(a)||(a=[]);var r=a.length;a=a.filter((function(a){return!t.valueComparator(a,e)})),a.length===r&&a.push(e)}else a=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(a,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(a,e)?null:e:!a;this.validate(!0,a),this.internalValue=a,this.hasColor=a}},onFocus:function(){this.isFocused=!0},onKeydown:function(t){}}}),p=a("c3f0"),m=a("0789"),h=a("490a"),f=a("80d2"),g=["title"];e["a"]=v.extend({name:"v-switch",directives:{Touch:p["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return Object(i["a"])(Object(i["a"])({},s["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){var t=this.attrs$,e=(t.title,Object(r["a"])(t,g));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",Object(i["a"])(Object(i["a"])({},this.attrs),e)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",Object(i["a"])({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",Object(i["a"])({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(m["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(h["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(t){(t.keyCode===f["y"].left&&this.isActive||t.keyCode===f["y"].right&&!this.isActive)&&this.onChange()}}})},ce87:function(t,e,a){"use strict";var r=a("16b7"),i=a("f2e7"),s=a("58df"),n=a("d9bd");e["a"]=Object(s["a"])(r["a"],i["a"]).extend({name:"v-hover",props:{disabled:{type:Boolean,default:!1},value:{type:Boolean,default:void 0}},methods:{onMouseEnter:function(){this.runDelay("open")},onMouseLeave:function(){this.runDelay("close")}},render:function(){return this.$scopedSlots.default||void 0!==this.value?(this.$scopedSlots.default&&(t=this.$scopedSlots.default({hover:this.isActive})),Array.isArray(t)&&1===t.length&&(t=t[0]),t&&!Array.isArray(t)&&t.tag?(this.disabled||(t.data=t.data||{},this._g(t.data,{mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})),t):(Object(n["c"])("v-hover should only contain a single element",this),t)):(Object(n["c"])("v-hover is missing a default scopedSlot or bound value",this),null);var t}})},cfef:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-5 my-sm-10 my-container"},[a("v-sheet",{staticClass:"myPlaylists mb-100 px-8 px-sm-16 py-sm-10 py-5",attrs:{color:"secondary","min-height":"500",rounded:""}},[a("div",{staticClass:"white--text text-h4 mb-10"},[t._v("Like")]),t.userLikes?a("v-row",t._l(t.userLikes,(function(e,r){return a("v-col",{key:r,attrs:{cols:"6",sm:"4",md:"3"}},[a("v-card",{staticClass:"pb-2 track-card",staticStyle:{position:"relative"},attrs:{elevation:"0"}},[a("v-btn",{staticClass:"myTrack-like",attrs:{small:"",absolute:"",icon:"",color:"white"},on:{click:function(a){return t.likes(e.tracks._id)}}},[t.myLikes.includes(e.tracks._id)?a("v-icon",{attrs:{small:""}},[t._v("mdi-cards-heart")]):a("v-icon",{attrs:{small:"",medium:""}},[t._v("mdi-cards-heart-outline")])],1),a("div",{staticClass:"track-photowrap"},[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(i){var s=i.hover;return[a("v-img",{staticClass:"track-photo",attrs:{src:e.tracks.cover}},[a("v-fade-transition",[s?a("v-overlay",{attrs:{absolute:"",color:"#d7f3f5"}},[a("v-icon",{attrs:{"x-large":""},on:{click:function(e){return t.play(r)}}},[t._v("mdi-play-circle-outline")])],1):t._e()],1)],1)]}}],null,!0)}),a("div",{staticStyle:{position:"relative"}},[a("router-link",{attrs:{to:"/track/"+e.tracks._id}},[a("div",{staticClass:"text-body-1 mt-2 white--text"},[t._v(t._s(e.tracks.title))]),a("div",{staticClass:"grey--text"},[t._v(t._s(e.tracks.artist.userName))])]),a("v-btn",{staticClass:"myLike-plus",attrs:{absolute:"",small:"",icon:"",color:"white"},on:{click:function(a){t.getSongId(e.tracks._id)}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-plus")])],1)],1)],1)],1)],1)})),1):t._e()],1),a("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.dialogAdd,callback:function(e){t.dialogAdd=e},expression:"dialogAdd"}},[a("v-card",[a("v-card-title",[t._v("選擇想加入的歌單")]),a("v-divider"),a("v-card-text",{staticClass:"py-10"},[a("v-form",{ref:"form"},[a("v-select",{attrs:{items:t.playlistItems,label:"歌單名稱",outlined:"",rules:t.titleRule},model:{value:t.seletedPlaylist,callback:function(e){t.seletedPlaylist=e},expression:"seletedPlaylist"}})],1)],1),a("v-card-text",{staticClass:"d-flex justify-space-between"},[a("div",[a("div",{staticClass:"mb-2"},[t._v("沒有適合的歌單？")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.dialogAdd=!1,t.dialogCreate=!0}}},[t._v("建立歌單")])],1),a("div",{staticClass:"mt-7"},[a("v-btn",{on:{click:function(e){t.dialogAdd=!1}}},[t._v("取消")]),a("v-btn",{attrs:{color:"success ms-2"},on:{click:t.addToPlaylist}},[t._v("確定")])],1)])],1)],1),a("v-dialog",{attrs:{"max-width":"500"},model:{value:t.dialogCreate,callback:function(e){t.dialogCreate=e},expression:"dialogCreate"}},[a("v-card",[a("v-card-title",[t._v("建立歌單")]),a("v-divider"),a("v-card-text",[a("v-form",{ref:"form",staticClass:"px-10"},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-row",{staticClass:"text-body-1 align-center"},[a("v-col",{attrs:{cols:"3"}},[t._v("歌單名稱")]),a("v-col",{attrs:{cols:"9"}},[a("v-text-field",{attrs:{clearable:"",rules:t.titleRule},model:{value:t.playListForm.title,callback:function(e){t.$set(t.playListForm,"title",e)},expression:"playListForm.title"}})],1)],1),a("v-row",{staticClass:"text-body-1"},[a("v-col",{attrs:{cols:"3"}},[t._v("簡介")]),a("v-col",{attrs:{cols:"9"}},[a("v-textarea",{attrs:{outlined:""},model:{value:t.playListForm.description,callback:function(e){t.$set(t.playListForm,"description",e)},expression:"playListForm.description"}})],1)],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary",text:""},on:{click:t.resetForm}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"primary",text:"",type:"submit"},on:{click:t.createPlaylist}},[t._v("Save")])],1)],1)],1)],1)},i=[],s=a("1da1"),n=(a("c740"),a("a4d3"),a("e01a"),a("4de4"),a("d3b7"),a("96cf"),{data:function(){return{myLikes:[],userLikes:[],playingSong:{title:"",artist:"",file:"",cover:"",_id:""},dialogAdd:!1,dialogCreate:!1,playlistItems:[],playlists:[],nowSongId:"",seletedPlaylist:"",playListForm:{title:"",description:""},valid:!0,titleRule:[function(t){return!!t||"必填欄位"}]}},methods:{play:function(t){this.playingSong={_id:this.userLikes[t].tracks._id,title:this.userLikes[t].tracks.title,artist:this.userLikes[t].tracks.artist.userName,file:this.userLikes[t].tracks.file,cover:this.userLikes[t].tracks.cover},this.$store.commit("track/play",this.playingSong)},getSongId:function(t){this.user.isLogin&&(this.dialogAdd=!0,this.nowSongId=t)},getUserPlaylist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0===t.user._id.length){e.next=13;break}return e.prev=1,e.next=4,t.api.get("/playlists?owner="+t.user._id);case 4:for(a=e.sent,r=a.data,t.playlists=r.result,i=0;i<t.playlists.length;i++)t.playlistItems.push(r.result[i].title);e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t.$swal({icon:"error",title:"錯誤",text:"取得歌單失敗"});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},addToPlaylist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.playlists.findIndex((function(e){return e.title===t.seletedPlaylist})),r=t.playlists[a]._id,e.prev=2,!t.user.isLogin){e.next=9;break}return e.next=6,t.api.patch("/playlists/addsong/"+r,{_id:t.nowSongId},{headers:{authorization:"Bearer "+t.user.token}});case 6:t.dialogAdd=!1,t.seletedPlaylist="",t.$swal({icon:"success",title:"成功",text:"加入成功"});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))()},createPlaylist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.post("/playlists",{title:t.playListForm.title,description:t.playListForm.description},{headers:{authorization:"Bearer "+t.user.token}});case 3:t.getUserPlaylist(),t.$swal({icon:"success",title:"成功",text:"新增成功"}),t.resetForm(),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},resetForm:function(){this.dialogCreate=!1,this.$refs.form.resetValidation(),this.form={title:"",description:""}},getUserLike:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/users/"+t.$route.params.id);case 3:a=e.sent,r=a.data,t.user._id===t.$route.params.id?t.userLikes=r.result.likes.filter((function(e){return e.tracks.artist._id===t.user._id||e.tracks.artist._id!==t.user._id&&!e.tracks.private})):t.userLikes=r.result.likes.filter((function(t){return!t.tracks.private})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得音樂失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},likes:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,!e.user.isLogin){a.next=4;break}return a.next=4,e.api.patch("/users/likes/"+e.user._id,{_id:t},{headers:{authorization:"Bearer "+e.user.token}});case 4:return a.next=6,e.$store.dispatch("user/getUserInfo");case 6:return a.next=8,e.getUserLike();case 8:a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),e.$swal({icon:"error",title:"錯誤",text:a.t0.response.data.message});case 13:e.getMyLikes();case 14:case"end":return a.stop()}}),a,null,[[0,10]])})))()},getMyLikes:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("user/getUserInfo");case 2:for(t.myLikes=[],a=0;a<t.user.likes.length;a++)t.myLikes.push(t.user.likes[a].tracks);return e.abrupt("return",[]);case 5:case"end":return e.stop()}}),e)})))()}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getMyLikes(),t.getUserPlaylist(),t.getUserLike();case 3:case"end":return e.stop()}}),e)})))()}}),o=n,l=a("2877"),c=a("6544"),u=a.n(c),d=a("8336"),v=a("b0af"),p=a("99d9"),m=a("62ad"),h=a("169a"),f=a("ce7e"),g=a("0789"),y=a("4bd4"),x=a("ce87"),b=a("132d"),k=a("adda"),w=a("a797"),_=a("0fd9"),C=a("b974"),V=a("8dd9"),$=a("2fa4"),R=a("8654"),S=a("a844"),L=Object(l["a"])(o,r,i,!1,null,null,null);e["default"]=L.exports;u()(L,{VBtn:d["a"],VCard:v["a"],VCardActions:p["a"],VCardText:p["c"],VCardTitle:p["d"],VCol:m["a"],VDialog:h["a"],VDivider:f["a"],VFadeTransition:g["d"],VForm:y["a"],VHover:x["a"],VIcon:b["a"],VImg:k["a"],VOverlay:w["a"],VRow:_["a"],VSelect:C["a"],VSheet:V["a"],VSpacer:$["a"],VTextField:R["a"],VTextarea:S["a"]})},ec29:function(t,e,a){},f839:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-container my-5 my-sm-10"},[a("v-overlay",{staticStyle:{"z-index":"999"},attrs:{value:t.isLoading}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),a("v-card",{staticClass:"white--text py-5 py-sm-10 mb-100",staticStyle:{position:"relative"},attrs:{elevation:"2","min-height":"500",color:"secondary"}},[a("v-card-title",{staticClass:"px-8 px-sm-16 text-h4 py-0"},[t._v("Music")]),a("v-card-text",{staticClass:"px-8 px-sm-16 text-body-1"},[a("div",[0!==t.user._id.length&&t.user._id===t.$route.params.id?a("v-dialog",{attrs:{width:"1000",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"d-none d-sm-block theme-btn mt-sm-6 me-sm-12",attrs:{absolute:"",top:"",right:"",large:""}},"v-btn",i,!1),r),[a("v-icon",{attrs:{left:""}},[t._v("mdi-cloud-upload")]),t._v("上傳音樂 ")],1),a("v-btn",t._g(t._b({staticClass:"d-sm-none theme-btn mt-sm-6 me-sm-12",attrs:{small:"",absolute:"",top:"",right:""}},"v-btn",i,!1),r),[a("v-icon",[t._v("mdi-cloud-upload")])],1)]}}],null,!1,1481442214),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[t._v(t._s(0===t.form._id.length?"新增音樂":"編輯音樂"))]),a("v-divider"),a("v-card-text",{staticClass:"mt-5"},[a("v-row",{staticClass:"px-sm-10"},[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("file-pond",{ref:"pond2",attrs:{name:"cover","label-idle":"點擊或拖曳上傳封面","allow-multiple":"false",allowImageCrop:"true",imageCropAspectRatio:"1","accepted-file-types":"image/jpeg, image/png",imageResizeTargetWidth:"250"},on:{updatefiles:function(e){return t.getCoverFiles(e)}}}),a("v-card-text",[t._v("*必填欄位，格式須為jpg、jpeg、png，不得超過5MB，圖片長寬須為1:1")])],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("file-pond",{ref:"pond",attrs:{name:"track","label-idle":"點擊或拖曳上傳音樂","allow-multiple":"false","accepted-file-types":"audio/mpeg"},on:{updatefiles:function(e){return t.getFileFiles(e)}}}),a("v-card-text",[t._v("*必填欄位，格式須為mp3，不得超過5MB，")])],1)],1)],1),a("v-card-text",{staticClass:"my-5"},[a("v-form",{ref:"form",staticClass:"px-sm-10",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-row",{staticClass:"text-body-1 align-center"},[a("v-col",{attrs:{cols:"3"}},[t._v("歌名")]),a("v-col",{attrs:{cols:"9"}},[a("v-text-field",{attrs:{clearable:"",required:"",rules:t.uploadRule},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),a("v-row",{staticClass:"text-body-1"},[a("v-col",{attrs:{cols:"3"}},[t._v("簡介")]),a("v-col",{attrs:{cols:"9"}},[a("v-textarea",{attrs:{outlined:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-row",{staticClass:"text-body-1 align-center"},[a("v-col",{attrs:{cols:"3"}},[t._v("類型")]),a("v-col",{attrs:{cols:"9"}},[a("v-select",{attrs:{items:t.items,"item-text":"type",required:"",rules:t.uploadRule,placeholder:"請選擇類型"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}})],1)],1),a("v-row",{staticClass:"text-body-1"},[a("v-col",{attrs:{cols:"3"}},[t._v("歌詞")]),a("v-col",{attrs:{cols:"9"}},[a("v-textarea",{attrs:{outlined:""},model:{value:t.form.lyric,callback:function(e){t.$set(t.form,"lyric",e)},expression:"form.lyric"}}),a("v-switch",{attrs:{label:"私人"},model:{value:t.form.private,callback:function(e){t.$set(t.form,"private",e)},expression:"form.private"}})],1)],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary",text:""},on:{click:t.resetForm}},[t._v("取消")]),a("v-btn",{attrs:{color:"success",text:"",type:"submit",disabled:!t.valid||t.modalSubmitting},on:{click:t.submitModal}},[t._v(t._s(0===t.form._id.length?"新增":"儲存"))])],1)],1)],1):t._e()],1)]),a("v-card-text",{staticClass:"px-8 px-sm-16"},[a("v-row",t._l(t.userTracks,(function(e,r){return a("v-col",{key:r,attrs:{cols:"6",sm:"4",md:"3"}},[a("v-card",{staticClass:"pb-2 track-card",staticStyle:{position:"relative"},attrs:{elevation:"0"}},[t.user._id===t.$route.params.id?a("v-chip",{staticClass:"mb-2 state-chip",attrs:{"x-small":""}},[t._v(t._s(e.private?"private":"public"))]):t._e(),void 0!==t.myLikes?a("v-btn",{staticClass:"myTrack-like",attrs:{small:"",absolute:"",icon:"",color:"white"},on:{click:function(a){return t.likes(e._id)}}},[t.myLikes.includes(e._id)?a("v-icon",{attrs:{small:""}},[t._v("mdi-cards-heart")]):a("v-icon",{attrs:{small:"",medium:""}},[t._v("mdi-cards-heart-outline")])],1):t._e(),a("div",{staticClass:"track-photowrap"},[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(i){var s=i.hover;return[a("v-img",{staticClass:"track-photo",attrs:{src:e.cover}},[a("v-fade-transition",[s?a("v-overlay",{attrs:{absolute:"",color:"#d7f3f5"}},[a("v-icon",{attrs:{"x-large":""},on:{click:function(e){return t.play(r)}}},[t._v("mdi-play-circle-outline")])],1):t._e()],1)],1)]}}],null,!0)}),a("div",{staticStyle:{position:"relative"}},[a("router-link",{attrs:{to:"/track/"+e._id}},[a("div",{staticClass:"text-body-1 mt-2 white--text pe-4"},[t._v(t._s(e.title))]),a("div",{staticClass:"grey--text"},[t._v(t._s(e.artist.userName))])]),a("v-btn",{staticClass:"myTrack-plus",attrs:{absolute:"",small:"",icon:"",color:"white"},on:{click:function(a){t.getSongId(e._id)}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-plus")])],1)],1)],1),0!==t.user._id.length&&t.user._id===t.$route.params.id?a("div",{staticClass:"d-flex justify-end"},[a("v-btn",{staticClass:"secondary myTrack-edit",attrs:{"x-small":""},on:{click:function(e){return t.editTrack(r)}}},[a("v-icon",{attrs:{"x-small":""}},[t._v("mdi-pencil")])],1),a("v-btn",{staticClass:"ms-2 btn-hover",attrs:{"x-small":"",color:"secondary myTrack-del"},on:{click:function(a){return t.deleteTrack(e._id)}}},[a("v-icon",{attrs:{"x-small":""}},[t._v("mdi-trash-can")])],1)],1):t._e()],1)],1)})),1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.dialogAdd,callback:function(e){t.dialogAdd=e},expression:"dialogAdd"}},[a("v-card",[a("v-card-title",[t._v("選擇想加入的歌單")]),a("v-divider"),a("v-card-text",{staticClass:"py-10"},[a("v-form",{ref:"form"},[a("v-select",{attrs:{items:t.playlistItems,label:"歌單名稱",outlined:"",rules:t.titleRule},model:{value:t.seletedPlaylist,callback:function(e){t.seletedPlaylist=e},expression:"seletedPlaylist"}})],1)],1),a("v-card-text",{staticClass:"d-flex justify-space-between"},[a("div",[a("div",{staticClass:"mb-2"},[t._v("沒有適合的歌單？")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.dialogAdd=!1,t.dialogCreate=!0}}},[t._v("建立歌單")])],1),a("div",{staticClass:"mt-7"},[a("v-btn",{on:{click:function(e){t.dialogAdd=!1}}},[t._v("取消")]),a("v-btn",{attrs:{color:"success ms-2"},on:{click:t.addToPlaylist}},[t._v("確定")])],1)])],1)],1),a("v-dialog",{attrs:{"max-width":"500"},model:{value:t.dialogCreate,callback:function(e){t.dialogCreate=e},expression:"dialogCreate"}},[a("v-card",[a("v-card-title",[t._v("建立歌單")]),a("v-divider"),a("v-card-text",[a("v-form",{ref:"form",staticClass:"px-10"},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-row",{staticClass:"text-body-1 align-center"},[a("v-col",{attrs:{cols:"3"}},[t._v("歌單名稱")]),a("v-col",{attrs:{cols:"9"}},[a("v-text-field",{attrs:{clearable:"",rules:t.titleRule},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),a("v-row",{staticClass:"text-body-1"},[a("v-col",{attrs:{cols:"3"}},[t._v("簡介")]),a("v-col",{attrs:{cols:"9"}},[a("v-textarea",{attrs:{outlined:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary",text:""},on:{click:t.resetPlaylistForm}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"primary",text:"",type:"submit"},on:{click:t.createPlaylist}},[t._v("Save")])],1)],1)],1)],1)},i=[],s=a("5530"),n=a("1da1"),o=(a("c740"),a("a4d3"),a("e01a"),a("96cf"),{data:function(){return{myLikes:[],isLoading:!1,valid:!0,uploadRule:[function(t){return!!t||"必填欄位"}],modalSubmitting:!1,userTracks:[],form:{title:"",private:!1,type:"",description:"",lyric:"",cover:null,file:null,uploadDate:Date.now(),_id:"",index:-1},playingSong:{title:"",artist:"",file:"",cover:"",_id:""},dialog:!1,items:[{type:"Rock"},{type:"Hip hop / Rap"},{type:"Electronic"},{type:"Pop"},{type:"Folk"},{type:"Alternative"},{type:"Post rock"},{type:"Metal"},{type:"Punk"},{type:"Reggae / Funk"},{type:"Classic"},{type:"Blues"},{type:"Jazz"},{type:"R&B / Soul"}],dialogAdd:!1,dialogCreate:!1,playlistItems:[],playlists:[],nowSongId:"",seletedPlaylist:"",playListForm:{title:"",description:""},titleRule:[function(t){return!!t||"必填欄位"}]}},methods:{getSongId:function(t){this.user.isLogin&&(this.dialogAdd=!0,this.nowSongId=t)},getUserPlaylist:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0===t.user._id.length){e.next=13;break}return e.prev=1,e.next=4,t.api.get("/playlists?owner="+t.user._id);case 4:for(a=e.sent,r=a.data,t.playlists=r.result,i=0;i<t.playlists.length;i++)t.playlistItems.push(r.result[i].title);e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t.$swal({icon:"error",title:"錯誤",text:"取得歌單失敗"});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},addToPlaylist:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.playlists.findIndex((function(e){return e.title===t.seletedPlaylist})),r=t.playlists[a]._id,e.prev=2,!t.user.isLogin){e.next=9;break}return e.next=6,t.api.patch("/playlists/addsong/"+r,{_id:t.nowSongId},{headers:{authorization:"Bearer "+t.user.token}});case 6:t.dialogAdd=!1,t.seletedPlaylist="",t.$swal({icon:"success",title:"成功",text:"加入成功"});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))()},createPlaylist:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.post("/playlists",{title:t.playListForm.title,description:t.playListForm.description},{headers:{authorization:"Bearer "+t.user.token}});case 3:t.getUserPlaylist(),t.$swal({icon:"success",title:"成功",text:"新增成功"}),t.resetPlaylistForm(),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},resetPlaylistForm:function(){this.dialogCreate=!1,this.$refs.form.resetValidation(),this.form={title:"",description:""}},play:function(t){this.playingSong={_id:this.userTracks[t]._id,title:this.userTracks[t].title,artist:this.userTracks[t].artist.userName,file:this.userTracks[t].file,cover:this.userTracks[t].cover},this.$store.commit("track/play",this.playingSong)},getCoverFiles:function(t){t[0]&&(this.form.cover=t[0].file)},getFileFiles:function(t){t[0]&&(this.form.file=t[0].file)},submitModal:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.form._id.length||null!==t.form.cover&&null!==t.form.file&&t.valid){e.next=3;break}return t.$swal({icon:"error",title:"錯誤",text:"缺少必填欄位"}),e.abrupt("return");case 3:for(r in t.modalSubmitting=!0,t.isLoading=!0,a=new FormData,t.form)"_id"!==r&&a.append(r,t.form[r]);if(e.prev=7,0!==t.form._id.length){e.next=13;break}return e.next=11,t.api.post("/tracks",a,{headers:{authorization:"Bearer "+t.user.token}});case 11:e.next=15;break;case 13:return e.next=15,t.api.patch("/tracks/"+t.form._id,a,{headers:{authorization:"Bearer "+t.user.token}});case 15:t.isLoading=!1,t.getPrivate(),t.$swal({icon:"success",title:"成功",text:"新增/修改成功"}),e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](7),console.log(e.t0),t.$swal({icon:"error",title:"錯誤",text:e.t0.response.data.message});case 24:t.dialog=!1,t.modalSubmitting=!1,t.$refs.form.resetValidation(),t.form={title:"",private:!1,type:"",description:"",lyric:"",cover:null,file:null,uploadDate:Date.now(),_id:"",index:-1},t.$refs.pond.removeFile(),t.$refs.pond2.removeFile();case 30:case"end":return e.stop()}}),e,null,[[7,20]])})))()},resetForm:function(){this.modalSubmitting||(this.form={artist:this.user.account,title:"",private:!1,type:"",description:"",lyric:"",cover:null,file:null,date:"",_id:"",index:-1},this.$refs.form.resetValidation(),this.dialog=!1)},editTrack:function(t){this.form=Object(s["a"])(Object(s["a"])({},this.userTracks[t]),{},{cover:null,file:null,index:t}),this.dialog=!0},deleteTrack:function(t){var e=this;this.$swal({icon:"warning",title:"刪除確認",text:"確定要刪除此音樂",type:"warning",showCancelButton:!0,confirmButtonText:"刪除",cancelButtonText:"取消"}).then((function(a){a.isConfirmed?e.api.delete("/tracks/"+t,{headers:{authorization:"Bearer "+e.user.token}}).then((function(){e.getPrivate(),e.$swal({icon:"success",title:"成功",text:"刪除成功"}),e.$emit("deleteTrack")})).catch((function(t){e.$swal({icon:"error",title:"失敗",text:t.message})})):e.$swal.close()}))},getUserTracks:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/tracks?artist="+t.$route.params.id);case 3:a=e.sent,r=a.data,t.userTracks=r.result,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得音樂失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},getPrivate:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/tracks/private/"+t.user._id,{headers:{authorization:"Bearer "+t.user.token}});case 3:a=e.sent,r=a.data,t.userTracks=r.result,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得音樂失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},likes:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,!e.user.isLogin){a.next=4;break}return a.next=4,e.api.patch("/users/likes/"+e.user._id,{_id:t},{headers:{authorization:"Bearer "+e.user.token}});case 4:a.next=9;break;case 6:a.prev=6,a.t0=a["catch"](0),e.$swal({icon:"error",title:"錯誤",text:a.t0.response.data.message});case 9:e.getMyLikes();case 10:case"end":return a.stop()}}),a,null,[[0,6]])})))()},getMyLikes:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("user/getUserInfo");case 2:for(t.myLikes=[],a=0;a<t.user.likes.length;a++)t.myLikes.push(t.user.likes[a].tracks);return e.abrupt("return",[]);case 5:case"end":return e.stop()}}),e)})))()}},created:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getMyLikes(),t.getUserPlaylist(),t.user._id===t.$route.params.id?t.getPrivate():t.getUserTracks();case 3:case"end":return e.stop()}}),e)})))()}}),l=o,c=a("2877"),u=a("6544"),d=a.n(u),v=a("8336"),p=a("b0af"),m=a("99d9"),h=a("cc20"),f=a("62ad"),g=a("169a"),y=a("ce7e"),x=a("0789"),b=a("4bd4"),k=a("ce87"),w=a("132d"),_=a("adda"),C=a("a797"),V=a("490a"),$=a("0fd9"),R=a("b974"),S=a("2fa4"),L=a("b73d"),P=a("8654"),j=a("a844"),T=Object(c["a"])(l,r,i,!1,null,null,null);e["default"]=T.exports;d()(T,{VBtn:v["a"],VCard:p["a"],VCardActions:m["a"],VCardText:m["c"],VCardTitle:m["d"],VChip:h["a"],VCol:f["a"],VDialog:g["a"],VDivider:y["a"],VFadeTransition:x["d"],VForm:b["a"],VHover:k["a"],VIcon:w["a"],VImg:_["a"],VOverlay:C["a"],VProgressCircular:V["a"],VRow:$["a"],VSelect:R["a"],VSpacer:S["a"],VSwitch:L["a"],VTextField:P["a"],VTextarea:j["a"]})}}]);
//# sourceMappingURL=member.d9a4dbb8.js.map